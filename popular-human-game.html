<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÎåÄÏ§ëÏ†Å Ïù∏Í∞Ñ - Popular Human</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background: #f5f5f5;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-container {
            width: 100%;
            max-width: 480px;
            height: 100vh;
            background: #fff;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        /* ÏÉÅÎã® Ïú†Ï†Ä Ï†ïÎ≥¥ Î∞î */
        .user-info-bar {
            background: #fff;
            padding: 12px 20px;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            z-index: 50;
        }

        .user-stats {
            display: flex;
            gap: 16px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .stat-icon {
            font-size: 18px;
        }

        .stat-value {
            color: #000;
        }

        /* ÏÉÅÎã® Ìó§Îçî */
        .top-header {
            background: #fff;
            padding: 12px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-stats {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #f8f8f8;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .stat-icon {
            font-size: 16px;
        }

        .stat-value {
            color: #000;
        }

        /* Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 70px;
            transition: padding-bottom 0.3s ease-in-out;
        }

        .main-content.no-padding {
            padding-bottom: 0;
        }

        /* ÌïòÎã® Í≥†Ï†ï Î©îÎâ¥ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 480px;
            height: 70px;
            background: #fff;
            border-top: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .bottom-nav.hidden {
            transform: translateY(100%);
            opacity: 0;
            pointer-events: none;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            transition: all 0.2s;
            padding: 10px 0;
        }

        .nav-item:hover {
            background: #f8f8f8;
        }

        .nav-item.active .nav-icon {
            color: #000;
        }

        .nav-item.active .nav-label {
            color: #000;
            font-weight: 700;
        }

        .nav-icon {
            font-size: 24px;
            color: #999;
            transition: color 0.2s;
        }

        .nav-label {
            font-size: 11px;
            color: #999;
            transition: color 0.2s;
        }

        /* ÏÉÅÎã® Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îçî */
        .top-banner-slider {
            position: relative;
            width: 100%;
            overflow: hidden;
            background: #fff;
            touch-action: pan-y;
        }

        .banner-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
            will-change: transform;
        }

        .banner-track.dragging {
            transition: none;
        }

        .banner-slide {
            min-width: 100%;
            height: 0;
            padding-bottom: 43.75%; /* 16:7 ÎπÑÏú® */
            position: relative;
            cursor: pointer;
        }

        .banner-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }

        .banner-navigation {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 12px 0 16px;
            background: #fff;
        }

        .banner-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #d0d0d0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .banner-dot.active {
            background: #000;
            width: 24px;
            border-radius: 4px;
        }

        /* Ìôà ÌôîÎ©¥ */
        .home-screen {
            display: none;
            height: 100%;
            overflow-y: auto;
        }

        .home-screen.active {
            display: block;
        }

        .scenario-section {
            padding: 20px;
            padding-bottom: 20px;
        }

        .scenario-section:last-child {
            padding-bottom: 100px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 16px;
        }

        /* Í¥ëÍ≥† Î¶¨ÏõåÎìú ÏÑπÏÖò */
        .ad-reward-section {
            padding: 0 20px 20px;
        }

        .ad-reward-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .ad-reward-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 20px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .ad-reward-btn:active:not(.cooldown) {
            transform: scale(0.98);
        }

        .ad-reward-btn:hover:not(.cooldown) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .ad-reward-btn.loading {
            background: linear-gradient(135deg, #555 0%, #777 100%);
            cursor: wait;
        }

        .ad-reward-btn.loading .ad-reward-icon {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ad-reward-btn.cooldown {
            background: linear-gradient(135deg, #e5e5e5 0%, #d0d0d0 100%);
            color: #999;
            cursor: not-allowed;
            box-shadow: none;
        }

        .ad-reward-icon {
            font-size: 28px;
            margin-bottom: 6px;
            display: block;
        }

        .ad-reward-text {
            font-size: 13px;
            font-weight: 600;
            line-height: 1.4;
        }

        .ad-reward-cooldown {
            font-size: 11px;
            margin-top: 6px;
            opacity: 0.9;
            font-weight: 600;
        }

        /* Ï§ÄÎπÑÏ§ë ÏãúÎÇòÎ¶¨Ïò§ */
        .scenario-card.upcoming {
            opacity: 0.7;
            cursor: not-allowed;
            position: relative;
            filter: grayscale(30%);
        }

        .scenario-card.upcoming::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 16px;
            pointer-events: none;
            z-index: 1;
        }

        .scenario-card.upcoming .scenario-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: 0;
        }

        .scenario-status.upcoming {
            background: rgba(108, 117, 125, 0.95);
            z-index: 2;
        }

        .scenario-card.upcoming .scenario-countdown {
            background: rgba(0, 0, 0, 0.7);
            z-index: 2;
        }

        .scenario-grid {
            display: grid;
            gap: 12px;
        }

        .scenario-card {
            background: #fff;
            border: 2px solid #e5e5e5;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
        }

        .scenario-card:hover {
            border-color: #000;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .scenario-banner {
            width: 100%;
            height: 0;
            padding-bottom: 43.75%; /* 16:7 ÎπÑÏú® (7/16 * 100) */
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .scenario-status {
            position: absolute;
            bottom: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(10px);
            color: #fff;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .scenario-countdown {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(10px);
            color: #fff;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .scenario-content {
            padding: 12px;
        }

        .scenario-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .scenario-emoji {
            font-size: 36px;
            display: none;
        }

        .scenario-info {
            flex: 1;
        }

        .scenario-title {
            font-size: 18px;
            font-weight: 700;
            color: #000;
            margin-bottom: 0;
        }

        .scenario-desc {
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
            display: none;
        }

        .scenario-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
            margin-bottom: 0;
        }

        .stat-box {
            background: #f8f8f8;
            padding: 7px 9px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stat-label {
            font-size: 11px;
            color: #999;
            font-weight: 600;
        }

        .stat-value-box {
            font-size: 15px;
            color: #000;
            font-weight: 700;
        }

        .scenario-meta {
            display: flex;
            gap: 8px;
            font-size: 12px;
            color: #666;
            padding-top: 12px;
            border-top: 1px solid #e5e5e5;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Í≤åÏûÑ ÌôîÎ©¥ */
        .game-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .game-screen.active {
            display: flex;
        }

        /* ÏÉÅÎã® Ïï†ÎãàÎ©îÏù¥ÏÖò ÏòÅÏó≠ */
        .animation-area {
            height: 0;
            padding-bottom: 56.25%; /* 16:9 ÎπÑÏú® */
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }

        .animation-image {
            font-size: 120px;
            animation: float 3s ease-in-out infinite;
            position: absolute;
            z-index: 1;
            display: none; /* Ïù¥Î™®ÏßÄ ÏïÑÏù¥ÏΩò Ïà®ÍπÄ */
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* ÏÉÅÌô© ÏÑ§Î™Ö Ïò§Î≤ÑÎ†àÏù¥ */
        .context-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.6) 50%, rgba(0,0,0,0.3) 70%, transparent 100%);
            padding: 40px 24px 24px;
            color: #fff;
            z-index: 2;
        }

        .context-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.5;
            text-shadow: 0 2px 8px rgba(0,0,0,0.5);
        }

        .context-subtitle {
            font-size: 14px;
            color: rgba(255,255,255,0.95);
            line-height: 1.5;
            text-shadow: 0 2px 6px rgba(0,0,0,0.5);
        }

        /* ÏãúÏûëÌïòÍ∏∞ Î≤ÑÌäº ÏòÅÏó≠ */
        .start-game-container {
            padding: 20px;
            background: #fff;
            border-top: 1px solid #f0f0f0;
        }

        .start-game-btn {
            width: 100%;
            padding: 16px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .start-game-btn:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .start-game-btn .ticket-badge {
            position: absolute;
            right: 16px;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
        }

        /* ÏßÑÌñâÎ∞î */
        .progress-bar {
            height: 3px;
            background: #e5e5e5;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: #000;
            transition: width 0.3s;
        }

        /* ÏßàÎ¨∏ ÏòÅÏó≠ */
        .question-area {
            flex: 1;
            padding: 24px 20px;
            padding-bottom: 20px;
            overflow-y: auto;
            background: #fff;
        }

        .question-number {
            color: #666;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .game-timer-banner {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            color: #fff;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            z-index: 3;
            display: none;
        }

        .game-timer-banner.active {
            display: block;
        }

        .question-text {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 24px;
            line-height: 1.4;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: #f8f8f8;
            border: 2px solid #e5e5e5;
            border-radius: 12px;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 15px;
            color: #333;
            font-weight: 500;
            text-align: left;
        }

        .option:hover {
            background: #fff;
            border-color: #ccc;
        }

        .option.selected {
            background: #000;
            border-color: #000;
            color: #fff;
            transform: scale(1.01);
        }

        .next-btn {
            margin-top: 20px;
            margin-bottom: 20px;
            width: 100%;
            padding: 16px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.3;
            pointer-events: none;
        }

        .next-btn.active {
            opacity: 1;
            pointer-events: auto;
        }

        .next-btn.active:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Í≤∞Í≥º ÌôîÎ©¥ */
        .result-screen {
            display: none;
            flex-direction: column;
            padding: 0;
            height: 100%;
            background: #fafafa;
            overflow-y: scroll;
        }

        .result-screen.active {
            display: flex;
        }

        .result-hero {
            background: #fff;
            padding: 0 20px 20px;
            text-align: center;
            color: #000;
            position: relative;
            overflow: hidden;
        }

        .result-banner {
            width: 100%;
            margin: 50px 0 20px;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }

        .result-banner-img {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 ÎπÑÏú® */
            background-size: cover;
            background-position: center;
        }

        .result-emoji {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out;
            position: relative;
            z-index: 1;
            display: none;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        .result-title {
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
            color: #000;
        }

        .result-subtitle {
            font-size: 15px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .pending-message {
            background: #f8f8f8;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 16px 20px;
            margin: 0 0 20px;
            position: relative;
            z-index: 1;
        }

        .pending-text {
            font-size: 13px;
            color: #333;
            line-height: 1.6;
        }

        .result-content {
            padding: 0 20px 20px;
            background: #fafafa;
        }

        .event-status {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid #e5e5e5;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            color: #666;
            font-size: 14px;
        }

        .status-value {
            color: #000;
            font-weight: 700;
            font-size: 16px;
        }

        .reward-box {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
            color: #fff;
            padding: 32px 24px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .reward-label {
            font-size: 14px;
            color: rgba(255,255,255,0.7);
            margin-bottom: 8px;
        }

        .reward-amount {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 8px;
        }

        .reward-info {
            font-size: 13px;
            color: rgba(255,255,255,0.8);
        }

        .result-summary {
            margin-bottom: 20px;
        }

        .summary-title {
            font-size: 18px;
            font-weight: 700;
            color: #000;
            margin-bottom: 16px;
        }

        .question-result {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid #e5e5e5;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .question-result-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .question-result-content {
            flex: 1;
        }

        .question-result-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .question-result-answer {
            font-size: 13px;
            color: #666;
        }

        .question-result-percent {
            font-size: 15px;
            font-weight: 700;
            color: #000;
            flex-shrink: 0;
        }

        .answer-comparison {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .answer-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: #f8f8f8;
            border-radius: 8px;
            border: 2px solid transparent;
        }

        .answer-item.user-choice {
            border-color: #000;
            background: #fff;
        }

        .answer-item.correct {
            background: #f0fdf4;
        }

        .answer-badge {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .badge-you {
            background: #000;
            color: #fff;
        }

        .badge-popular {
            background: #4ade80;
            color: #fff;
        }

        .answer-text {
            flex: 1;
            font-size: 13px;
            color: #333;
        }

        .answer-percent {
            font-size: 13px;
            font-weight: 700;
            color: #666;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 80px;
        }

        .action-btn {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
        }

        .btn-primary {
            background: #000;
            color: #fff;
        }

        .btn-primary:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #fff;
            color: #000;
            border: 2px solid #e5e5e5;
        }

        .btn-secondary:hover {
            background: #f8f8f8;
            border-color: #000;
        }

        .btn-dark {
            background: #000;
            color: #fff;
            border: 2px solid #000;
        }

        .btn-dark:hover {
            background: #333;
        }

        .btn-orange {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
            color: #fff;
        }

        .btn-orange:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-dark {
            background: #000;
            color: #fff;
        }

        .btn-dark:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .ticket-badge {
            position: absolute;
            right: 16px;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
        }

        .btn-primary .ticket-badge {
            background: rgba(255,255,255,0.2);
            color: #fff;
        }

        /* ÏûÑÏãú ÌÖåÏä§Ìä∏ Î≤ÑÌäº */
        .debug-buttons {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
        }

        .debug-btn {
            padding: 8px 12px;
            background: #667eea;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            white-space: nowrap;
        }

        /* Í≥µÏú† ÌåùÏóÖ */
        .share-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }

        .share-popup.active {
            display: flex;
        }

        .share-popup-content {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .share-popup-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 16px;
            text-align: center;
        }

        .share-text-area {
            background: #f8f8f8;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .share-buttons {
            display: flex;
            gap: 8px;
        }

        .share-btn {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .share-btn-copy {
            background: #000;
            color: #fff;
        }

        .share-btn-close {
            background: #f8f8f8;
            color: #000;
            border: 1px solid #e5e5e5;
        }

        /* ÏïåÎ¶º ÌåùÏóÖ */
        .notification-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }

        .notification-popup.active {
            display: flex;
        }

        .notification-popup-content {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            max-width: 360px;
            width: 100%;
        }

        .notification-popup-title {
            font-size: 18px;
            font-weight: 700;
            color: #000;
            margin-bottom: 12px;
        }

        .notification-popup-text {
            font-size: 14px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 16px;
        }

        .notification-popup-highlight {
            background: #fff3cd;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            color: #856404;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .notification-buttons {
            display: flex;
            gap: 8px;
        }

        .notification-btn {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .notification-btn-confirm {
            background: #ff6b35;
            color: #fff;
        }

        .notification-btn-cancel {
            background: #f8f8f8;
            color: #000;
            border: 1px solid #e5e5e5;
        }

        /* Í∏∞ÌÉÄ ÌôîÎ©¥Îì§ */
        .other-screen {
            display: none;
            padding: 20px;
            height: 100%;
            overflow-y: auto;
        }

        .other-screen.active {
            display: block;
        }

        .screen-title {
            font-size: 24px;
            font-weight: 900;
            color: #000;
            margin-bottom: 20px;
        }

        .placeholder-content {
            background: #f8f8f8;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            color: #999;
        }

        /* ÏÉÅÏ†ê Ïä§ÌÉÄÏùº */
        .shop-section {
            margin-bottom: 30px;
        }

        .shop-category-title {
            font-size: 18px;
            font-weight: 700;
            color: #000;
            margin-bottom: 16px;
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .shop-item {
            background: #fff;
            border: 2px solid #e5e5e5;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .shop-item:hover {
            border-color: #000;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .shop-item-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .shop-item-name {
            font-size: 16px;
            font-weight: 700;
            color: #000;
            margin-bottom: 8px;
        }

        .shop-item-price {
            font-size: 20px;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 12px;
        }

        .shop-buy-btn {
            width: 100%;
            padding: 10px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .shop-buy-btn:hover {
            background: #333;
        }

        /* ÎÇ¥ ÏÑ†ÌÉù Î≥¥Í∏∞ ÎìúÎ°≠Îã§Ïö¥ */
        .my-choices-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8f8f8;
            border-radius: 12px;
            margin-bottom: 8px;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
        }

        .my-choices-header:hover {
            background: #f0f0f0;
            border-color: #000;
        }

        .dropdown-arrow {
            font-size: 14px;
            transition: transform 0.3s;
        }

        .dropdown-arrow.open {
            transform: rotate(180deg);
        }

        .my-choices-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        /* Í≤åÏûÑ Ìó§Îçî ÏÇ≠Ï†ú */
        .game-header {
            display: none;
        }

        .back-btn-overlay {
            position: absolute;
            top: 16px;
            left: 16px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            border: none;
            color: #fff;
            font-size: 20px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .back-btn {
            font-size: 24px;
            cursor: pointer;
            color: #000;
            background: none;
            border: none;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .game-title {
            flex: 1;
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            color: #000;
        }

        .game-title-placeholder {
            width: 24px;
        }

        /* ÏãúÍ∞Ñ Ï¢ÖÎ£å ÌåùÏóÖ */
        .timeout-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }

        .timeout-popup.active {
            display: flex;
        }

        .timeout-popup-content {
            background: #fff;
            border-radius: 16px;
            padding: 32px 24px;
            max-width: 320px;
            width: 100%;
            text-align: center;
        }

        .timeout-popup-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .timeout-popup-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 12px;
        }

        .timeout-popup-text {
            font-size: 15px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 24px;
        }

        .timeout-popup-btn {
            width: 100%;
            padding: 14px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
        }

        /* Í≤åÏûÑ ÏãúÏûë ÌôïÏù∏ ÌåùÏóÖ */
        .game-start-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }

        .game-start-popup.active {
            display: flex;
        }

        .game-start-popup-content {
            background: #fff;
            border-radius: 16px;
            padding: 28px 24px;
            max-width: 320px;
            width: 100%;
            text-align: center;
        }

        /* Í≤åÏûÑ Ï¢ÖÎ£å ÌôïÏù∏ ÌåùÏóÖ */
        .exit-game-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }

        .exit-game-popup.active {
            display: flex;
        }

        .exit-game-popup-content {
            background: #fff;
            border-radius: 16px;
            padding: 28px 24px;
            max-width: 320px;
            width: 100%;
            text-align: center;
        }

        .exit-game-popup-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .exit-game-popup-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 12px;
        }

        .exit-game-popup-text {
            font-size: 15px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .exit-game-buttons {
            display: flex;
            gap: 8px;
        }

        .exit-game-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .exit-game-btn-cancel {
            background: #000;
            color: #fff;
        }

        .exit-game-btn-cancel:hover {
            background: #333;
        }

        .exit-game-btn-exit {
            background: #f8f8f8;
            color: #000;
            border: 1px solid #e5e5e5;
        }

        .exit-game-btn-exit:hover {
            background: #e5e5e5;
        }

        .game-start-popup-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin-bottom: 16px;
        }

        .game-start-info {
            background: #f8f8f8;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .game-start-info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 15px;
            color: #333;
            margin-bottom: 8px;
        }

        .game-start-info-item:last-child {
            margin-bottom: 0;
        }

        .game-start-info-label {
            color: #666;
        }

        .game-start-info-value {
            font-weight: 700;
        }

        .game-start-buttons {
            display: flex;
            gap: 8px;
        }

        .game-start-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .game-start-btn-cancel {
            background: #f8f8f8;
            color: #000;
            border: 1px solid #e5e5e5;
        }

        .game-start-btn-confirm {
            background: #000;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ -->
        <div class="main-content">
            <!-- Ìôà ÌôîÎ©¥ -->
            <div class="home-screen active" id="homeScreen">
                <!-- ÏÉÅÎã® Ìó§Îçî -->
                <div class="top-header">
                    <div class="logo"></div>
                    <div class="user-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üí∞</span>
                            <span class="stat-value" id="coinCount">1250</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚≠ê</span>
                            <span class="stat-value" id="rewardPoints">850</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üé´</span>
                            <span class="stat-value" id="ticketCount">5</span>
                        </div>
                    </div>
                </div>

                <!-- ÏÉÅÎã® Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îçî -->
                <div class="top-banner-slider">
                    <div class="banner-track" id="bannerTrack">
                        <div class="banner-slide">
                            <div class="banner-image" style="background-image: url('Main_Banner_001.png');"></div>
                        </div>
                        <div class="banner-slide">
                            <div class="banner-image" style="background-image: url('Main_Banner_002.png');"></div>
                        </div>
                        <div class="banner-slide">
                            <div class="banner-image" style="background-image: url('Main_Banner_003.png');"></div>
                        </div>
                        <div class="banner-slide">
                            <div class="banner-image" style="background-image: url('Main_Banner_004.png');"></div>
                        </div>
                        <div class="banner-slide">
                            <div class="banner-image" style="background-image: url('Main_Banner_005.png');"></div>
                        </div>
                    </div>
                    <div class="banner-navigation" id="bannerNavigation">
                        <span class="banner-dot active" onclick="goToBanner(0)"></span>
                        <span class="banner-dot" onclick="goToBanner(1)"></span>
                        <span class="banner-dot" onclick="goToBanner(2)"></span>
                        <span class="banner-dot" onclick="goToBanner(3)"></span>
                        <span class="banner-dot" onclick="goToBanner(4)"></span>
                    </div>
                </div>

                <div class="scenario-section">
                    <div class="section-title">üéØ Ïò§ÎäòÏùò ÏãúÎÇòÎ¶¨Ïò§</div>
                    <div class="scenario-grid">
                        <div class="scenario-card" onclick="startGame('wedding')">
                            <div class="scenario-banner" style="background-image: url('wedding_banner.png');">
                                <div class="scenario-status">
                                    <div class="status-dot"></div>
                                    Ï∞∏Ïó¨ Í∞ÄÎä•
                                </div>
                                <div class="scenario-countdown" id="weddingCountdown">02:50:00</div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-info">
                                    <div class="scenario-title">ÏπúÍµ¨Ïùò Í≤∞ÌòºÏãù</div>
                                </div>
                                <div class="scenario-stats">
                                    <div class="stat-box">
                                        <div class="stat-label">Î¶¨ÏõåÎìú</div>
                                        <div class="stat-value-box">üí∞ 50 USDT</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌîåÎ†àÏù¥ Ï†úÌïúÏãúÍ∞Ñ</div>
                                        <div class="stat-value-box">‚è± 10Î∂Ñ</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Î¨∏Ï†ú Ïàò</div>
                                        <div class="stat-value-box">‚ùì 10Î¨∏Ï†ú</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌïÑÏöî Ìã∞Ïºì</div>
                                        <div class="stat-value-box">üé´ 1Í∞ú</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="scenario-card" onclick="startGame('blind-date')">
                            <div class="scenario-banner" style="background-image: url('blind_date_banner.png');">
                                <div class="scenario-status">
                                    <div class="status-dot"></div>
                                    Ï∞∏Ïó¨ Í∞ÄÎä•
                                </div>
                                <div class="scenario-countdown" id="blindDateCountdown">02:50:00</div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-info">
                                    <div class="scenario-title">Ï≤òÏùå ÌïòÎäî ÏÜåÍ∞úÌåÖ</div>
                                </div>
                                <div class="scenario-stats">
                                    <div class="stat-box">
                                        <div class="stat-label">Î¶¨ÏõåÎìú</div>
                                        <div class="stat-value-box">üí∞ 50 USDT</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌîåÎ†àÏù¥ Ï†úÌïúÏãúÍ∞Ñ</div>
                                        <div class="stat-value-box">‚è± 10Î∂Ñ</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Î¨∏Ï†ú Ïàò</div>
                                        <div class="stat-value-box">‚ùì 10Î¨∏Ï†ú</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌïÑÏöî Ìã∞Ïºì</div>
                                        <div class="stat-value-box">üé´ 1Í∞ú</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="scenario-card" onclick="startGame('bbq')">
                            <div class="scenario-banner" style="background-image: url('bbq_banner.png');">
                                <div class="scenario-status">
                                    <div class="status-dot"></div>
                                    Ï∞∏Ïó¨ Í∞ÄÎä•
                                </div>
                                <div class="scenario-countdown" id="bbqCountdown">02:50:00</div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-info">
                                    <div class="scenario-title">Î∞îÎ≤†ÌÅê ÍµΩÍ∏∞</div>
                                </div>
                                <div class="scenario-stats">
                                    <div class="stat-box">
                                        <div class="stat-label">Î¶¨ÏõåÎìú</div>
                                        <div class="stat-value-box">üí∞ 50 USDT</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌîåÎ†àÏù¥ Ï†úÌïúÏãúÍ∞Ñ</div>
                                        <div class="stat-value-box">‚è± 10Î∂Ñ</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Î¨∏Ï†ú Ïàò</div>
                                        <div class="stat-value-box">‚ùì 10Î¨∏Ï†ú</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌïÑÏöî Ìã∞Ïºì</div>
                                        <div class="stat-value-box">üé´ 1Í∞ú</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Í¥ëÍ≥† Î¶¨ÏõåÎìú ÏÑπÏÖò -->
                <div class="ad-reward-section">
                    <div class="section-title">üéÅ Î¨¥Î£å Ìã∞Ïºì Î∞õÍ∏∞</div>
                    <div class="ad-reward-grid">
                        <button class="ad-reward-btn" id="adRewardBtn1" onclick="watchAd(1)">
                            <div class="ad-reward-icon">üì∫</div>
                            <div class="ad-reward-text">Í¥ëÍ≥† Î≥¥Í≥†<br>üé´ Î∞õÍ∏∞</div>
                            <div class="ad-reward-cooldown" id="adCooldown1"></div>
                        </button>
                        <button class="ad-reward-btn" id="adRewardBtn2" onclick="watchAd(2)">
                            <div class="ad-reward-icon">üì∫</div>
                            <div class="ad-reward-text">Í¥ëÍ≥† Î≥¥Í≥†<br>üé´ Î∞õÍ∏∞</div>
                            <div class="ad-reward-cooldown" id="adCooldown2"></div>
                        </button>
                        <button class="ad-reward-btn" id="adRewardBtn3" onclick="watchAd(3)">
                            <div class="ad-reward-icon">üì∫</div>
                            <div class="ad-reward-text">Í¥ëÍ≥† Î≥¥Í≥†<br>üé´ Î∞õÍ∏∞</div>
                            <div class="ad-reward-cooldown" id="adCooldown3"></div>
                        </button>
                    </div>
                </div>

                <!-- Ï§ÄÎπÑÏ§ë ÏãúÎÇòÎ¶¨Ïò§ ÏÑπÏÖò -->
                <div class="scenario-section">
                    <div class="section-title">‚è∞ Îã§Ïùå ÏãúÎÇòÎ¶¨Ïò§ ÏòàÍ≥†</div>
                    <div class="scenario-grid">
                        <div class="scenario-card upcoming">
                            <div class="scenario-banner" style="background-image: url('wedding_banner.png');">
                                <div class="scenario-status upcoming">
                                    <div class="status-dot"></div>
                                    Ï§ÄÎπÑ Ï§ë
                                </div>
                                <div class="scenario-countdown" id="upcomingCountdown1">12:30:00</div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-info">
                                    <div class="scenario-title">ÌöåÏÇ¨ ÌöåÏãù</div>
                                </div>
                                <div class="scenario-stats">
                                    <div class="stat-box">
                                        <div class="stat-label">Î¶¨ÏõåÎìú</div>
                                        <div class="stat-value-box">üí∞ 50 USDT</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌîåÎ†àÏù¥ Ï†úÌïúÏãúÍ∞Ñ</div>
                                        <div class="stat-value-box">‚è± 10Î∂Ñ</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Î¨∏Ï†ú Ïàò</div>
                                        <div class="stat-value-box">‚ùì 10Î¨∏Ï†ú</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌïÑÏöî Ìã∞Ïºì</div>
                                        <div class="stat-value-box">üé´ 1Í∞ú</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="scenario-card upcoming">
                            <div class="scenario-banner" style="background-image: url('blind_date_banner.png');">
                                <div class="scenario-status upcoming">
                                    <div class="status-dot"></div>
                                    Ï§ÄÎπÑ Ï§ë
                                </div>
                                <div class="scenario-countdown" id="upcomingCountdown2">18:45:00</div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-info">
                                    <div class="scenario-title">Î∂ÄÎ™®Îãò ÎåÅ Î∞©Î¨∏</div>
                                </div>
                                <div class="scenario-stats">
                                    <div class="stat-box">
                                        <div class="stat-label">Î¶¨ÏõåÎìú</div>
                                        <div class="stat-value-box">üí∞ 50 USDT</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌîåÎ†àÏù¥ Ï†úÌïúÏãúÍ∞Ñ</div>
                                        <div class="stat-value-box">‚è± 10Î∂Ñ</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">Î¨∏Ï†ú Ïàò</div>
                                        <div class="stat-value-box">‚ùì 10Î¨∏Ï†ú</div>
                                    </div>
                                    <div class="stat-box">
                                        <div class="stat-label">ÌïÑÏöî Ìã∞Ïºì</div>
                                        <div class="stat-value-box">üé´ 1Í∞ú</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Í≤åÏûÑ ÌôîÎ©¥ -->
            <div class="game-screen" id="gameScreen">
                <div class="animation-area">
                    <button class="back-btn-overlay" onclick="backToHome()">‚Üê</button>
                    <div class="animation-image" id="animationImage">üíí</div>
                    <div class="game-timer-banner" id="gameTimer">10:00</div>
                    <div class="context-overlay" id="contextOverlay">
                        <div class="context-title" id="contextTitle"></div>
                        <div class="context-subtitle" id="contextSubtitle"></div>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 10%"></div>
                </div>
                
                <div class="question-area">
                    <div class="question-number" id="questionNumber">ÏßàÎ¨∏ 1/10</div>
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="optionsContainer"></div>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Îã§Ïùå ÏßàÎ¨∏</button>
                </div>
            </div>

            <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
            <div class="result-screen" id="resultScreen">
                <div class="result-hero">
                    <!-- Î∞∞ÎÑà Ïù¥ÎØ∏ÏßÄ (Ïù¥Î™®ÏßÄ ÎåÄÏã†) -->
                    <div class="result-banner">
                        <div class="result-banner-img" id="resultBannerImg"></div>
                    </div>
                    <div class="result-emoji" id="resultEmoji">‚è≥</div>
                    <div class="result-title" id="resultTitle">ÏÇ¨ÎûåÎì§ÏùÄ ÎãπÏã†Í≥º Í∞ôÏùÄ ÏÑ†ÌÉùÏùÑ ÌñàÏùÑÍπåÏöî?</div>
                    <div class="result-subtitle" id="resultSubtitle">Ïù¥ Ïù¥Î≤§Ìä∏Îäî ÏïÑÏßÅ ÏßÑÌñâ Ï§ëÏûÖÎãàÎã§<br>Í≤∞Í≥ºÎäî Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ Í≥µÍ∞úÎê©ÎãàÎã§</div>
                    <div class="pending-message" id="pendingMessage">
                        <div class="pending-text">
                            üåç Ï∞∏Ïó¨ Ï§ëÏù∏ ÏÇ¨ÎûåÎì§: <strong id="totalParticipants">0</strong>Î™Ö<br>
                            ‚è≥ Ï¢ÖÎ£åÍπåÏßÄ ÎÇ®ÏùÄ ÏãúÍ∞Ñ: <strong id="eventTimeLeft">00:00:00</strong>
                        </div>
                    </div>
                </div>

                <div class="result-content" id="resultContent">
                    <!-- Ïù¥Î≤§Ìä∏ ÏßÑÌñâ Ï§ëÏùº Îïå -->
                    <div id="pendingContent">
                        <div class="action-buttons">
                            <button class="action-btn btn-primary" onclick="retryGame()">
                                Ìïú Î≤à Îçî Ï∞∏Ïó¨ÌïòÍ∏∞
                                <span class="ticket-badge">üé´ -1</span>
                            </button>
                            <button class="action-btn btn-orange" onclick="shareEvent()">
                                Ïù¥Î≤§Ìä∏ Í≥µÏú†ÌïòÍ∏∞
                            </button>
                            <button class="action-btn btn-dark" onclick="backToHome()">
                                Î©îÏù∏ ÌôîÎ©¥
                            </button>
                        </div>
                    </div>

                    <!-- Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ (ÏäπÏûê) -->
                    <div id="winnerContent" style="display: none;">
                        <div class="reward-box">
                            <div class="reward-label">üéÅ ÌöçÎìù ÏÉÅÍ∏à</div>
                            <div class="reward-amount" id="rewardAmount">32.4 USDT</div>
                            <div class="reward-info">Ï¥ù <span id="totalWinners">124</span>Î™Ö Ï§ë Ìïú Î™Ö</div>
                        </div>

                        <div class="event-status">
                            <div class="status-item">
                                <span class="status-label">ÎãπÏã†Ïùò ÏÑ†ÌÉù</span>
                                <span class="status-value">‚úÖ Í∏ÄÎ°úÎ≤å ÏµúÎã§ ÏÑ†ÌÉù</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Ï†ïÎãµ Î¨∏Ï†ú</span>
                                <span class="status-value" id="correctAnswers">10 / 10</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">ÌöçÎìù Ìè¨Ïù∏Ìä∏</span>
                                <span class="status-value">‚≠ê <span id="earnedPointsWin">100</span>P</span>
                            </div>
                        </div>

                        <div class="result-summary">
                            <div class="my-choices-header" onclick="toggleMyChoices('win')" style="cursor: pointer; user-select: none;">
                                <div class="summary-title">
                                    <div>üëÄ ÎÇ¥ ÏÑ†ÌÉù Î≥¥Í∏∞</div>
                                    <div id="attemptInfoWin" style="font-size: 12px; color: #666; margin-top: 4px;"></div>
                                </div>
                                <div class="dropdown-arrow" id="dropdownArrowWin">‚ñº</div>
                            </div>
                            <div id="myChoicesContentWin" class="my-choices-content" style="display: none;">
                                <div id="questionResults"></div>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="action-btn btn-orange" onclick="notifyNextEvent()">
                                Îã§Ïùå Ïù¥Î≤§Ìä∏ ÏïåÎ¶º Î∞õÍ∏∞
                            </button>
                            <button class="action-btn btn-secondary" onclick="shareResult()">
                                Í≤∞Í≥º Í≥µÏú†ÌïòÍ∏∞
                            </button>
                            <button class="action-btn btn-primary" onclick="backToHome()">
                                Î©îÏù∏ ÌôîÎ©¥
                            </button>
                        </div>
                    </div>

                    <!-- Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ (Ìå®Î∞∞) -->
                    <div id="loserContent" style="display: none;">
                        <div class="event-status">
                            <div class="status-item">
                                <span class="status-label">Ï†ïÎãµ Î¨∏Ï†ú</span>
                                <span class="status-value" id="correctAnswersLose">7 / 10</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">ÌöçÎìù Ìè¨Ïù∏Ìä∏</span>
                                <span class="status-value">‚≠ê <span id="earnedPointsLose">70</span>P</span>
                            </div>
                        </div>

                        <div class="result-summary">
                            <div class="my-choices-header" onclick="toggleMyChoices('lose')" style="cursor: pointer; user-select: none;">
                                <div class="summary-title">
                                    <div>üëÄ ÎÇ¥ ÏÑ†ÌÉù Î≥¥Í∏∞</div>
                                    <div id="attemptInfoLose" style="font-size: 12px; color: #666; margin-top: 4px;"></div>
                                </div>
                                <div class="dropdown-arrow" id="dropdownArrowLose">‚ñº</div>
                            </div>
                            <div id="myChoicesContentLose" class="my-choices-content" style="display: none;">
                                <div id="questionResultsLose"></div>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="action-btn btn-dark" onclick="backToHome()">
                                Î©îÏù∏ ÌôîÎ©¥
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÎîîÎ≤ÑÍ∑∏ Î≤ÑÌäº (ÏûÑÏãú) -->
            <div class="debug-buttons">
                <button class="debug-btn" onclick="testWinnerResult()">ÏäπÏûê ÌôîÎ©¥ Î≥¥Í∏∞</button>
                <button class="debug-btn" onclick="testLoserResult()">Ìå®Î∞∞ ÌôîÎ©¥ Î≥¥Í∏∞</button>
            </div>

            <!-- ÏïåÎ¶º ÌåùÏóÖ -->
            <div class="notification-popup" id="notificationPopup">
                <div class="notification-popup-content">
                    <div class="notification-popup-title">üîî Îã§Ïùå Ïù¥Î≤§Ìä∏ ÏïåÎ¶º</div>
                    <div class="notification-popup-text">
                        Îã§Ïùå Ïù¥Î≤§Ìä∏ ÏãúÏûë <strong>10Î∂Ñ Ï†Ñ</strong>Ïóê ÏïåÎ¶ºÏùÑ Î≥¥ÎÇ¥ÎìúÎ¶ΩÎãàÎã§.
                    </div>
                    <div class="notification-popup-highlight">
                        ‚ö†Ô∏è ÏïåÎ¶ºÏùÑ Î∞õÏúºÎ†§Î©¥ Î∏åÎùºÏö∞Ï†Ä ÏïåÎ¶º Í∂åÌïúÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.<br>
                        ÌôïÏù∏ Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ ÏïåÎ¶º Í∂åÌïú ÏöîÏ≤≠Ïù¥ ÌëúÏãúÎê©ÎãàÎã§.
                    </div>
                    <div class="notification-buttons">
                        <button class="notification-btn notification-btn-cancel" onclick="closeNotificationPopup()">Ï∑®ÏÜå</button>
                        <button class="notification-btn notification-btn-confirm" onclick="confirmNotification()">ÏïåÎ¶º Î∞õÍ∏∞</button>
                    </div>
                </div>
            </div>

            <!-- Í≥µÏú† ÌåùÏóÖ -->
            <div class="share-popup" id="sharePopup">
                <div class="share-popup-content">
                    <div class="share-popup-title">üì§ Í≤∞Í≥º Í≥µÏú†ÌïòÍ∏∞</div>
                    <div class="share-text-area" id="shareText"></div>
                    <div class="share-buttons">
                        <button class="share-btn share-btn-close" onclick="closeSharePopup()">Îã´Í∏∞</button>
                        <button class="share-btn share-btn-copy" onclick="copyShareText()">Î≥µÏÇ¨ÌïòÍ∏∞</button>
                    </div>
                </div>
            </div>

            <!-- ÏãúÍ∞Ñ Ï¢ÖÎ£å ÌåùÏóÖ -->
            <div class="timeout-popup" id="timeoutPopup">
                <div class="timeout-popup-content">
                    <div class="timeout-popup-icon">‚è±Ô∏è</div>
                    <div class="timeout-popup-title">ÏãúÍ∞ÑÏù¥ Ï¢ÖÎ£åÎêòÏóàÏäµÎãàÎã§</div>
                    <div class="timeout-popup-text">10Î∂Ñ ÏïàÏóê Î™®Îì† ÏßàÎ¨∏Ïóê<br>ÎãµÎ≥ÄÌïòÏßÄ Î™ªÌñàÏäµÎãàÎã§.</div>
                    <button class="timeout-popup-btn" onclick="closeTimeoutPopup()">ÌôïÏù∏</button>
                </div>
            </div>

            <!-- Í≤åÏûÑ ÏãúÏûë ÌôïÏù∏ ÌåùÏóÖ -->
            <div class="game-start-popup" id="gameStartPopup">
                <div class="game-start-popup-content">
                    <div class="game-start-popup-title">Í≤åÏûÑÏùÑ ÏãúÏûëÌï†ÍπåÏöî?</div>
                    <div class="game-start-info">
                        <div class="game-start-info-item">
                            <span class="game-start-info-label">ÌïÑÏöî Ìã∞Ïºì</span>
                            <span class="game-start-info-value">üé´ 1Í∞ú</span>
                        </div>
                        <div class="game-start-info-item">
                            <span class="game-start-info-label">ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ</span>
                            <span class="game-start-info-value">‚è± 10Î∂Ñ</span>
                        </div>
                        <div class="game-start-info-item">
                            <span class="game-start-info-label">Î¨∏Ï†ú Ïàò</span>
                            <span class="game-start-info-value">‚ùì 10Î¨∏Ï†ú</span>
                        </div>
                    </div>
                    <div class="game-start-buttons">
                        <button class="game-start-btn game-start-btn-cancel" onclick="closeGameStartPopup()">Ï∑®ÏÜå</button>
                        <button class="game-start-btn game-start-btn-confirm" onclick="confirmGameStart()">ÏãúÏûëÌïòÍ∏∞</button>
                    </div>
                </div>
            </div>

            <!-- Í≤åÏûÑ Ï¢ÖÎ£å ÌôïÏù∏ ÌåùÏóÖ -->
            <div class="exit-game-popup" id="exitGamePopup">
                <div class="exit-game-popup-content">
                    <div class="exit-game-popup-icon">‚ö†Ô∏è</div>
                    <div class="exit-game-popup-title">Í≤åÏûÑÏùÑ Ï¢ÖÎ£åÌïòÏãúÍ≤†ÏäµÎãàÍπå?</div>
                    <div class="exit-game-popup-text">
                        ÏÇ¨Ïö©Ìïú Ìã∞ÏºìÏù¥ ÏÇ¨ÎùºÏßÄÎ©∞,<br>
                        ÏßÑÌñâ Ï§ëÏù∏ Í≤åÏûÑÏù¥ Ï†ÄÏû•ÎêòÏßÄ ÏïäÏäµÎãàÎã§.
                    </div>
                    <div class="exit-game-buttons">
                        <button class="exit-game-btn exit-game-btn-cancel" onclick="closeExitGamePopup()">Í≥ÑÏÜç ÌîåÎ†àÏù¥</button>
                        <button class="exit-game-btn exit-game-btn-exit" onclick="confirmExitGame()">ÎÇòÍ∞ÄÍ∏∞</button>
                    </div>
                </div>
            </div>

            <!-- ÏÉÅÏ†ê ÌôîÎ©¥ -->
            <div class="other-screen" id="shopScreen">
                <div class="screen-title">üõç ÏÉÅÏ†ê</div>
                
                <div class="shop-section">
                    <div class="shop-category-title">üé´ Ìã∞Ïºì Íµ¨Îß§</div>
                    <div class="shop-grid">
                        <div class="shop-item" onclick="buyTickets(10)">
                            <div class="shop-item-icon">üé´</div>
                            <div class="shop-item-name">Ìã∞Ïºì 10Í∞ú</div>
                            <div class="shop-item-price">1.0 USDT</div>
                            <button class="shop-buy-btn">Íµ¨Îß§ÌïòÍ∏∞</button>
                        </div>
                        <div class="shop-item" onclick="buyTickets(30)">
                            <div class="shop-item-icon">üé´</div>
                            <div class="shop-item-name">Ìã∞Ïºì 30Í∞ú</div>
                            <div class="shop-item-price">3.0 USDT</div>
                            <button class="shop-buy-btn">Íµ¨Îß§ÌïòÍ∏∞</button>
                        </div>
                        <div class="shop-item" onclick="buyTickets(50)">
                            <div class="shop-item-icon">üé´</div>
                            <div class="shop-item-name">Ìã∞Ïºì 50Í∞ú</div>
                            <div class="shop-item-price">5.0 USDT</div>
                            <button class="shop-buy-btn">Íµ¨Îß§ÌïòÍ∏∞</button>
                        </div>
                        <div class="shop-item" onclick="buyTickets(100)">
                            <div class="shop-item-icon">üé´</div>
                            <div class="shop-item-name">Ìã∞Ïºì 100Í∞ú</div>
                            <div class="shop-item-price">10.0 USDT</div>
                            <button class="shop-buy-btn">Íµ¨Îß§ÌïòÍ∏∞</button>
                        </div>
                        <div class="shop-item" onclick="buyTickets(300)">
                            <div class="shop-item-icon">üé´</div>
                            <div class="shop-item-name">Ìã∞Ïºì 300Í∞ú</div>
                            <div class="shop-item-price">30.0 USDT</div>
                            <button class="shop-buy-btn">Íµ¨Îß§ÌïòÍ∏∞</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Îû≠ÌÇπ ÌôîÎ©¥ -->
            <div class="other-screen" id="rankingScreen">
                <div class="screen-title">üèÜ Îû≠ÌÇπ</div>
                <div class="placeholder-content">Îû≠ÌÇπ ÌôîÎ©¥ (Ï§ÄÎπÑ Ï§ë)</div>
            </div>

            <!-- ÌîÑÎ°úÌïÑ ÌôîÎ©¥ -->
            <div class="other-screen" id="profileScreen">
                <div class="screen-title">üë§ ÌîÑÎ°úÌïÑ</div>
                <div class="placeholder-content">ÌîÑÎ°úÌïÑ ÌôîÎ©¥ (Ï§ÄÎπÑ Ï§ë)</div>
            </div>

            <!-- ÏÑ§Ï†ï ÌôîÎ©¥ -->
            <div class="other-screen" id="settingsScreen">
                <div class="screen-title">‚öôÔ∏è ÏÑ§Ï†ï</div>
                <div class="placeholder-content">ÏÑ§Ï†ï ÌôîÎ©¥ (Ï§ÄÎπÑ Ï§ë)</div>
            </div>
        </div>

        <!-- ÌïòÎã® Í≥†Ï†ï Î©îÎâ¥ -->
        <div class="bottom-nav">
            <div class="nav-item" onclick="switchScreen('shop')">
                <div class="nav-icon">üõç</div>
                <div class="nav-label">ÏÉÅÏ†ê</div>
            </div>
            <div class="nav-item" onclick="switchScreen('ranking')">
                <div class="nav-icon">üèÜ</div>
                <div class="nav-label">Îû≠ÌÇπ</div>
            </div>
            <div class="nav-item active" onclick="switchScreen('home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Ìôà</div>
            </div>
            <div class="nav-item" onclick="switchScreen('profile')">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">ÌîÑÎ°úÌïÑ</div>
            </div>
            <div class="nav-item" onclick="switchScreen('settings')">
                <div class="nav-icon">‚öôÔ∏è</div>
                <div class="nav-label">ÏÑ§Ï†ï</div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // ÏÑúÎ≤Ñ Ïó∞ÎèôÏùÑ ÏúÑÌïú API Íµ¨Ï°∞
        // ========================================
        
        const API = {
            // Î≤†Ïù¥Ïä§ URL (Ïã§Ï†ú ÏÑúÎ≤Ñ Ï£ºÏÜåÎ°ú Î≥ÄÍ≤Ω ÌïÑÏöî)
            baseURL: 'https://api.popularhuman.com',
            
            // Ïú†Ï†Ä Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            async getUserInfo() {
                try {
                    // const response = await fetch(`${this.baseURL}/user/info`, {
                    //     headers: { 'Authorization': `Bearer ${getToken()}` }
                    // });
                    // return await response.json();
                    
                    // ÏûÑÏãú Îç∞Ïù¥ÌÑ∞
                    return {
                        userId: 'user123',
                        email: 'player@example.com',
                        characterName: 'ÎåÄÏ§ëÎü¨Î≤Ñ',
                        coins: 1250,
                        rewardPoints: 850,
                        tickets: 5
                    };
                } catch (error) {
                    console.error('Ïú†Ï†Ä Ï†ïÎ≥¥ Î°úÎìú Ïã§Ìå®:', error);
                    return null;
                }
            },
            
            // ÏãúÎÇòÎ¶¨Ïò§ Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞
            async getScenarios() {
                try {
                    // const response = await fetch(`${this.baseURL}/scenarios`);
                    // return await response.json();
                    
                    // ÏûÑÏãú Îç∞Ïù¥ÌÑ∞Îäî ÌïòÎã® scenarios Í∞ùÏ≤¥ ÏÇ¨Ïö©
                    return scenarios;
                } catch (error) {
                    console.error('ÏãúÎÇòÎ¶¨Ïò§ Î°úÎìú Ïã§Ìå®:', error);
                    return null;
                }
            },
            
            // Í≤åÏûÑ ÏãúÏûë (Ìã∞Ïºì Ï∞®Í∞ê)
            async startGame(scenarioId) {
                try {
                    // const response = await fetch(`${this.baseURL}/game/start`, {
                    //     method: 'POST',
                    //     headers: { 
                    //         'Authorization': `Bearer ${getToken()}`,
                    //         'Content-Type': 'application/json'
                    //     },
                    //     body: JSON.stringify({ scenarioId })
                    // });
                    // return await response.json();
                    
                    // ÏûÑÏãú: Ìã∞Ïºì Ï∞®Í∞ê
                    const currentTickets = parseInt(document.getElementById('ticketCount').textContent);
                    if (currentTickets > 0) {
                        updateUserStats({ tickets: currentTickets - 1 });
                        return { success: true, gameId: 'game_' + Date.now() };
                    }
                    return { success: false, message: 'Ìã∞ÏºìÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§' };
                } catch (error) {
                    console.error('Í≤åÏûÑ ÏãúÏûë Ïã§Ìå®:', error);
                    return { success: false };
                }
            },
            
            // ÎãµÎ≥Ä Ï†úÏ∂ú
            async submitAnswer(gameId, questionId, answer) {
                try {
                    // const response = await fetch(`${this.baseURL}/game/answer`, {
                    //     method: 'POST',
                    //     headers: { 
                    //         'Authorization': `Bearer ${getToken()}`,
                    //         'Content-Type': 'application/json'
                    //     },
                    //     body: JSON.stringify({ gameId, questionId, answer })
                    // });
                    // return await response.json();
                    
                    // ÏûÑÏãú: Î°úÏª¨ Ï≤òÎ¶¨
                    return { success: true };
                } catch (error) {
                    console.error('ÎãµÎ≥Ä Ï†úÏ∂ú Ïã§Ìå®:', error);
                    return { success: false };
                }
            },
            
            // Í≤åÏûÑ ÏôÑÎ£å Î∞è Í≤∞Í≥º Î∞õÍ∏∞
            async completeGame(gameId, answers) {
                try {
                    // const response = await fetch(`${this.baseURL}/game/complete`, {
                    //     method: 'POST',
                    //     headers: { 
                    //         'Authorization': `Bearer ${getToken()}`,
                    //         'Content-Type': 'application/json'
                    //     },
                    //     body: JSON.stringify({ gameId, answers })
                    // });
                    // return await response.json();
                    
                    // ÏûÑÏãú: Î°úÏª¨ Í≥ÑÏÇ∞
                    return {
                        status: 'pending', // 'pending' | 'complete'
                        correctCount: correctCount,
                        totalQuestions: currentScenario.questions.length,
                        totalParticipants: 128492,
                        eventTimeLeft: 6138, // Ï¥à Îã®ÏúÑ
                        // Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ Ï∂îÍ∞Ä Îç∞Ïù¥ÌÑ∞
                        isWinner: false,
                        earnedCoins: 0,
                        earnedPoints: 0,
                        rewardAmount: 0,
                        totalWinners: 0,
                        questionResults: [] // Î¨∏Ï†úÎ≥Ñ ÏÉÅÏÑ∏ Í≤∞Í≥º
                    };
                } catch (error) {
                    console.error('Í≤åÏûÑ ÏôÑÎ£å Ï≤òÎ¶¨ Ïã§Ìå®:', error);
                    return null;
                }
            },

            // Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ Í≤∞Í≥º Ï°∞Ìöå
            async getEventResult(gameId) {
                try {
                    // const response = await fetch(`${this.baseURL}/game/result/${gameId}`, {
                    //     headers: { 'Authorization': `Bearer ${getToken()}` }
                    // });
                    // return await response.json();
                    
                    // ÏûÑÏãú: ÏäπÏûê Îç∞Ïù¥ÌÑ∞
                    const isWinner = Math.random() > 0.5;
                    
                    return {
                        status: 'complete',
                        isWinner: isWinner,
                        correctCount: isWinner ? 10 : 7,
                        totalQuestions: 10,
                        rewardAmount: isWinner ? 32.4 : 0,
                        totalWinners: 124,
                        topPercentile: 38,
                        questionResults: currentScenario.questions.map((q, idx) => {
                            const userAnswer = userAnswers[idx];
                            const correctAnswer = q.correct;
                            const isCorrect = userAnswer === correctAnswer;
                            
                            return {
                                questionNumber: idx + 1,
                                question: q.q,
                                userAnswer: q.options[userAnswer],
                                correctAnswer: q.options[correctAnswer],
                                isCorrect: isCorrect,
                                userPercentage: Math.floor(Math.random() * 30) + 20,
                                correctPercentage: Math.floor(Math.random() * 30) + 40
                            };
                        })
                    };
                } catch (error) {
                    console.error('Í≤∞Í≥º Ï°∞Ìöå Ïã§Ìå®:', error);
                    return null;
                }
            }
        };

        // ========================================
        // Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞
        // ========================================
        
        const scenarios = {
            'wedding': {
                name: 'ÏπúÍµ¨Ïùò Í≤∞ÌòºÏãù',
                emoji: 'üíí',
                bannerImage: 'wedding_banner.png',
                contextTitle: 'Ïò§ÎäòÏùÄ Í∞ÄÏû• ÏπúÌïú ÏπúÍµ¨Ïùò Í≤∞ÌòºÏãùÏûÖÎãàÎã§.',
                contextSubtitle: 'Ïù¥ ÏÉÅÌô©ÏóêÏÑú, ÏÇ¨ÎûåÎì§ÏùÄ Ïñ¥Îñ§ ÏÑ†ÌÉùÏùÑ Ìï†ÍπåÏöî?',
                questions: [
                    {
                        q: 'Í≤∞ÌòºÏãù Ï¥àÎåÄÎ•º Î∞õÏïòÏùÑ Îïå, Í∞ÄÏû• Î®ºÏ†Ä ÎìúÎäî ÏÉùÍ∞ÅÏùÄ?',
                        options: [
                            '"Ïñ¥Îñ§ Ïò∑ÏùÑ ÏûÖÏßÄ?"',
                            '"ÏÑ†Î¨º(Ï∂ïÏùòÍ∏à)ÏùÑ ÏñºÎßàÎ°ú Ìï†Íπå?"',
                            '"ÎàÑÍ∞Ä Îòê Ïò¨Íπå?"',
                            '"ÏÇ¨ÏßÑ Ïûò ÎÇòÏò§Í≤å Ìï¥ÏïºÏßÄ"'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Í≤∞ÌòºÏãù Î≥µÏû•ÏúºÎ°ú Í∞ÄÏû• Î¨¥ÎÇúÌïú ÏÑ†ÌÉùÏùÄ?',
                        options: [
                            'Îã®Ï†ïÌïú Ìè¨Î©Ä Ïä§ÌÉÄÏùº',
                            'ÏÑ∏ÎØ∏ Ìè¨Î©Ä (ÍπîÎÅîÌïú Ï∫êÏ£ºÏñº)',
                            'Í∞úÏÑ± ÏûàÎäî Ïä§ÌÉÄÏùº',
                            'ÌèâÏÜå ÏûÖÎçò Ïò∑ Ï§ë Í∞ÄÏû• ÍπîÎÅîÌïú Í≤É'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Ï∂ïÌïòÏùò ÌëúÏãúÎ°ú Í∞ÄÏû• ÎßéÏù¥ ÏÑ†ÌÉùÌïòÎäî Í≤ÉÏùÄ?',
                        options: [
                            'ÌòÑÍ∏à / Í∏∞ÌîÑÌä∏ Ïπ¥Îìú',
                            'ÎØ∏Î¶¨ Ï§ÄÎπÑÌïú ÏÑ†Î¨º',
                            'Ïò®ÎùºÏù∏ÏúºÎ°ú Ï†ÑÎã¨',
                            'Ï∞∏ÏÑù ÏûêÏ≤¥Í∞Ä ÏÑ†Î¨º'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Í≤∞ÌòºÏãùÏóêÎäî Ïñ∏Ï†ú ÎèÑÏ∞©ÌïòÎäî Ìé∏ÏùºÍπå?',
                        options: [
                            'ÏãúÏûëÎ≥¥Îã§ 20Î∂Ñ Ïù¥ÏÉÅ ÏùºÏ∞ç',
                            'ÏãúÏûë 10Î∂Ñ Ï†Ñ',
                            'Í±∞Ïùò ÏãúÏûë ÏãúÍ∞Ñ',
                            'ÏÇ¥Ïßù Îä¶Í≤å ÎèÑÏ∞©'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Ïã†Îûë/Ïã†Î∂ÄÎ•º ÎßåÎÇòÎ©¥ Î≥¥ÌÜµ Ïñ¥ÎñªÍ≤å Ïù∏ÏÇ¨Ìï†Íπå?',
                        options: [
                            'ÏßÑÏßÄÌïòÍ≤å Ï∂ïÌïò Ïù∏ÏÇ¨',
                            'ÏßßÍ≥† Î∞ùÍ≤å Ï∂ïÌïò',
                            'ÏÇ¨ÏßÑ Î®ºÏ†Ä Ï∞çÏûêÍ≥† ÌïúÎã§',
                            'ÏÇ¨Îûå ÎßéÏùÑ Îïå Ï°∞Ïö©Ìûà Ïù∏ÏÇ¨'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Í≤∞ÌòºÏãùÏù¥ ÏßÑÌñâÎêòÎäî ÎèôÏïà Í∞ÄÏû• ÎßéÏù¥ ÌïòÎäî ÌñâÎèôÏùÄ?',
                        options: [
                            'ÏßëÏ§ëÌï¥ÏÑú Î≥∏Îã§',
                            'ÏÇ¨ÏßÑÏù¥ÎÇò ÏòÅÏÉÅ Ï¥¨ÏòÅ',
                            'Ï£ºÎ≥Ä ÏÇ¨ÎûåÎì§Í≥º ÏÜåÍ∑ºÏÜåÍ∑º ÎåÄÌôî',
                            'Î∂ÑÏúÑÍ∏∞Îßå Î≥¥Í≥† ÏûàÎã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Í≤∞ÌòºÏãù ÏÇ¨ÏßÑÏùÑ SNSÏóê Ïò¨Î¶∞Îã§Î©¥?',
                        options: [
                            'Î∞îÎ°ú Ïò¨Î¶∞Îã§',
                            'ÌïòÎ£® Îí§Ïóê Ïò¨Î¶∞Îã§',
                            'Ïã†Îûë/Ïã†Î∂Ä ÌóàÎùΩ ÌõÑ',
                            'Ïò¨Î¶¨ÏßÄ ÏïäÎäîÎã§'
                        ],
                        correct: 3
                    },
                    {
                        q: 'ÏãùÏÇ¨ ÏãúÍ∞ÑÏóê Í∞ÄÏû• Ïã†Í≤Ω Ïì∞Îäî Í≤ÉÏùÄ?',
                        options: [
                            'ÏùåÏãù Îßõ',
                            'Ïñë',
                            'Ìï®Íªò ÏïâÏùÄ ÏÇ¨Îûå',
                            'Îπ†Î•¥Í≤å Î®πÍ≥† ÏûêÎ¶¨ Ïù¥Îèô'
                        ],
                        correct: 2
                    },
                    {
                        q: 'Í≤∞ÌòºÏãùÏù¥ ÎÅùÎÇú Îí§ Î≥¥ÌÜµ Ïñ¥ÎñªÍ≤å Ìï†Íπå?',
                        options: [
                            'Î∞îÎ°ú Í∑ÄÍ∞Ä',
                            'ÏπúÍµ¨Îì§Í≥º Í∞ÑÎã®Ìûà Îçî Î≥¥Í∏∞',
                            'Ïã†Îûë/Ïã†Î∂ÄÏôÄ Ï∂îÍ∞Ä ÏÇ¨ÏßÑ',
                            '2Ï∞® ÏûêÎ¶¨ÍπåÏßÄ Í∞ÑÎã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Ïò§Îäò Í≤∞ÌòºÏãùÏóêÏÑú Í∞ÄÏû• Ï§ëÏöîÌñàÎçò Í≤ÉÏùÄ?',
                        options: [
                            'ÏπúÍµ¨Ïùò ÌñâÎ≥µ',
                            'Î∂ÑÏúÑÍ∏∞ÏôÄ Í∏∞Ïñµ',
                            'ÏÇ¨ÎûåÎì§Í≥ºÏùò ÎßåÎÇ®',
                            'ÏòàÏùòÏôÄ Îß§ÎÑà'
                        ],
                        correct: 0
                    }
                ]
            },
            'blind-date': {
                name: 'Ï≤òÏùå ÌïòÎäî ÏÜåÍ∞úÌåÖ',
                emoji: 'üíï',
                bannerImage: 'blind_date_banner.png',
                contextTitle: 'Ïò§ÎäòÏùÄ Ï≤òÏùåÏúºÎ°ú ÏÜåÍ∞úÌåÖÏùÑ ÌïòÎäî ÎÇ†ÏûÖÎãàÎã§.',
                contextSubtitle: 'Ïù¥ ÏÉÅÌô©ÏóêÏÑú ÏÇ¨ÎûåÎì§ÏùÄ Ïñ¥Îñ§ ÏÑ†ÌÉùÏùÑ Ìï†ÍπåÏöî?',
                questions: [
                    {
                        q: 'ÏßëÏùÑ ÎÇòÏÑúÍ∏∞ ÏßÅÏ†Ñ, Í±∞Ïö∏ ÏïûÏóêÏÑú Í∞ÄÏû• ÎßéÏù¥ ÌïòÎäî ÌñâÎèôÏùÄ?',
                        options: [
                            'Î®∏Î¶¨Î•º Îã§Ïãú Ìïú Î≤à ÎßåÏßÑÎã§',
                            'Ïò∑ÏùÑ Í∞àÏïÑÏûÖÏùÑÏßÄ Í≥†ÎØºÌïúÎã§',
                            'ÌëúÏ†ï Ïó∞ÏäµÏùÑ Ìï¥Î≥∏Îã§',
                            '"Í¥úÏ∞ÆÏïÑ" ÌïòÍ≥† Í∑∏ÎÉ• ÎÇòÍ∞ÑÎã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'ÏÜåÍ∞úÌåÖ ÏÉÅÎåÄÏóêÍ≤åÏÑú "Ï°∞Ïã¨Ìûà Ïò§ÏÑ∏Ïöî üôÇ"ÎùºÎäî Î©îÏãúÏßÄÍ∞Ä ÏôîÎã§',
                        options: [
                            'Î∞îÎ°ú ÎãµÏû•ÌïúÎã§',
                            'ÌïòÌä∏ ÌïòÎÇò Î∂ôÏó¨ÏÑú ÎãµÏû•ÌïúÎã§',
                            'ÏòàÏùò ÏûàÍ≤å ÏßßÍ≤å ÎãµÏû•ÌïúÎã§',
                            'Ï∂úÎ∞ú ÏßÅÏ†ÑÏóê ÎãµÏû•ÌïúÎã§'
                        ],
                        correct: 2
                    },
                    {
                        q: 'ÏïΩÏÜç Ïû•ÏÜå Í∑ºÏ≤òÏóê ÎÑàÎ¨¥ ÏùºÏ∞ç ÎèÑÏ∞©ÌñàÎã§',
                        options: [
                            'Í∑ºÏ≤ò Ïπ¥ÌéòÏóêÏÑú ÏãúÍ∞Ñ Î≥¥ÎÇ∏Îã§',
                            'Ï£ºÎ≥ÄÏùÑ Ìïú Î∞îÌÄ¥ ÎèàÎã§',
                            'Î®ºÏ†Ä ÏôÄ ÏûàÎäî Ï≤ô ÏûêÎ¶¨Ïóê ÏïâÏïÑ ÏûàÎã§',
                            'Ìè∞Îßå Î≥¥Î©∞ Í∏∞Îã§Î¶∞Îã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'ÏÉÅÎåÄÍ∞Ä Î©ÄÎ¶¨ÏÑú Í±∏Ïñ¥Ïò§Îäî Í≤å Î≥¥Ïù∏Îã§',
                        options: [
                            'ÏõÉÏúºÎ©¥ÏÑú ÏÜêÏùÑ ÌùîÎì†Îã§',
                            'ÏûêÏó∞Ïä§ÎüΩÍ≤å Îàà ÎßàÏ£ºÏπòÍ∏∏ Í∏∞Îã§Î¶∞Îã§',
                            'Ìï∏ÎìúÌè∞ Î≥¥Îäî Ï≤ôÌïúÎã§',
                            'ÏÉÅÎåÄÍ∞Ä Î®ºÏ†Ä ÏïåÏïÑÎ≥¥Í∏∏ Í∏∞Îã§Î¶∞Îã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'ÏûêÎ¶¨Ïóê ÏïâÏûêÎßàÏûê ÏÉùÍ∏∞Îäî ÎØ∏Î¨òÌïú Ïπ®Î¨µ',
                        options: [
                            'Î©îÎâ¥Î∂ÄÌÑ∞ Î≥∏Îã§',
                            '"Ïò§ÏãúÎäêÎùº Í≥†ÏÉùÌïòÏÖ®Ïñ¥Ïöî"ÎùºÍ≥† ÎßêÌïúÎã§',
                            'ÎÇ†Ïî® ÏñòÍ∏∞Î•º Í∫ºÎÇ∏Îã§',
                            'ÏÉÅÎåÄÍ∞Ä Î®ºÏ†Ä ÎßêÌïòÍ∏∏ Í∏∞Îã§Î¶∞Îã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Î©îÎâ¥ÌåêÏùÑ Î≥¥ÎäîÎç∞, ÏÉÅÎåÄÍ∞Ä Í≥†ÎØº Ï§ëÏù¥Îã§',
                        options: [
                            '"ÏïÑÎ¨¥Í±∞ÎÇò Í¥úÏ∞ÆÏïÑÏöî"ÎùºÍ≥† ÎßêÌïúÎã§',
                            'Ï∂îÏ≤ú Î©îÎâ¥Î•º Ï†úÏïàÌïúÎã§',
                            'ÏÉÅÎåÄÍ∞Ä Í≥†Î•∏ Îí§ Îî∞Îùº Í≥†Î•∏Îã§',
                            'Í∑∏ÎÉ• ÎÇ¥Í∞Ä Î®πÍ≥† Ïã∂ÏùÄ Í±∏ Í≥†Î•∏Îã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'ÎåÄÌôîÍ∞Ä Ïûò ÎêòÎã§Í∞Ä Í∞ëÏûêÍ∏∞ Ïñ¥ÏÉâÌï¥Ï°åÎã§',
                        options: [
                            'Î¨ºÏù¥ÎÇò ÏùåÎ£åÎ•º ÎßàÏã†Îã§',
                            'ÏõÉÏúºÎ©¥ÏÑú Í≥†Í∞úÎ•º ÎÅÑÎçïÏù∏Îã§',
                            'ÏßàÎ¨∏ ÌïòÎÇòÎ•º ÎçòÏßÑÎã§',
                            'ÌôîÏ†úÎ•º Ïä¨Ï©ç Î∞îÍæºÎã§'
                        ],
                        correct: 2
                    },
                    {
                        q: 'ÏÜåÍ∞úÌåÖ ÎèÑÏ§ë, Ìú¥ÎåÄÌè∞ ÏïåÎ¶ºÏù¥ Ïö∏Î†∏Îã§',
                        options: [
                            'Î∞îÎ°ú Î¨¥ÏùåÏúºÎ°ú Î∞îÍæºÎã§',
                            'ÌôïÏù∏Îßå ÏÇ¥Ïßù ÌïúÎã§',
                            'ÏïÑÏòà Î≥¥ÏßÄ ÏïäÎäîÎã§',
                            '"Ïû†ÍπêÎßåÏöî" ÌïòÍ≥† ÌôïÏù∏ÌïúÎã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Í≥ÑÏÇ∞Ìï† ÏãúÍ∞ÑÏù¥ ÎêêÎã§',
                        options: [
                            'ÏûêÏó∞Ïä§ÎüΩÍ≤å Î∞òÎ∞òÏùÑ Ï†úÏïàÌïúÎã§',
                            'ÏÉÅÎåÄÍ∞Ä Î®ºÏ†Ä ÎßêÌïòÍ∏∏ Í∏∞Îã§Î¶∞Îã§',
                            'ÎÇ¥Í∞Ä Î®ºÏ†Ä Í≥ÑÏÇ∞ÌïúÎã§',
                            'Ïπ¥Îìú Îì§Í≥† ÎààÏπò Î≥∏Îã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Ìó§Ïñ¥ÏßÄÍ≥† ÏßëÏóê Í∞ÄÎäî Í∏∏',
                        options: [
                            '"Ïò§Îäò Ï¶êÍ±∞Ïõ†Ïñ¥Ïöî" Î©îÏãúÏßÄÎ•º Î∞îÎ°ú Î≥¥ÎÇ∏Îã§',
                            'Ïßë ÎèÑÏ∞© ÌõÑ Î©îÏãúÏßÄÎ•º Î≥¥ÎÇ∏Îã§',
                            'ÌïòÎ£® Ï†ïÎèÑ Í≥†ÎØºÌïúÎã§',
                            'ÏÉÅÎåÄÍ∞Ä Î®ºÏ†Ä Ïó∞ÎùΩÌïòÍ∏∏ Í∏∞Îã§Î¶∞Îã§'
                        ],
                        correct: 1
                    }
                ]
            },
            'bbq': {
                name: 'Î∞îÎ≤†ÌÅê ÍµΩÍ∏∞',
                emoji: 'üî•',
                bannerImage: 'bbq_banner.png',
                contextTitle: 'Ïò§ÎäòÏùÄ Î∞îÎ≤†ÌÅêÎ•º ÍµΩÎäî ÎÇ†ÏûÖÎãàÎã§.',
                contextSubtitle: 'Ïù¥ ÏÉÅÌô©ÏóêÏÑú ÏÇ¨ÎûåÎì§ÏùÄ Ïñ¥Îñ§ ÏÑ†ÌÉùÏùÑ Ìï†ÍπåÏöî?',
                questions: [
                    {
                        q: 'Î∂àÏùÑ ÌîºÏö∞Í∏∞ Ï†Ñ, ÏÇ¨ÎûåÎì§Ïù¥ Í∞ÄÏû• Î®ºÏ†Ä ÌïòÎäî ÌñâÎèôÏùÄ?',
                        options: [
                            'ÏàØÎ∂ÄÌÑ∞ Í∫ºÎÇ∏Îã§',
                            'Í≥†Í∏∞ÏôÄ Ïû¨Î£åÎ•º Î®ºÏ†Ä Ï§ÄÎπÑÌïúÎã§',
                            'Î∂à Î∂ôÏù¥Îäî ÎèÑÍµ¨Î•º Ï∞æÎäîÎã§',
                            'ÎàÑÍ∞Ä Îß°ÏùÑÏßÄ ÏÑúÎ°ú ÎààÏπò Î≥∏Îã§'
                        ],
                        correct: 2
                    },
                    {
                        q: 'Ï±ÑÏÜåÎÇò Îã§Î•∏ Ïû¨Î£åÎèÑ Ìï®Íªò ÍµΩÎäîÎã§Î©¥?',
                        options: [
                            'Í≥†Í∏∞ÏôÄ Í∞ôÏù¥ ÍµΩÎäîÎã§',
                            'Í≥†Í∏∞ Îã§ ÍµΩÍ≥† ÎÇòÏÑú ÍµΩÎäîÎã§',
                            'Î∂àÌåê Í∞ÄÏû•ÏûêÎ¶¨Ïóê Ïò¨Î¶∞Îã§',
                            'ÏïÑÏòà ÍµΩÏßÄ ÏïäÎäîÎã§'
                        ],
                        correct: 2
                    },
                    {
                        q: 'Î∂àÏù¥ Ïûò Ïïà Î∂ôÎäîÎã§',
                        options: [
                            'Î∂ÄÏ±ÑÏßàÏùÑ ÌïúÎã§',
                            'Î∂àÏèòÏãúÍ∞úÎ•º Îçî ÎÑ£ÎäîÎã§',
                            'Ïú†ÌäúÎ∏åÎÇò Í≤ÄÏÉâÏùÑ Ìï¥Î≥∏Îã§',
                            '"Ï¢Ä Í∏∞Îã§Î¶¨Ïûê"ÎùºÍ≥† ÎßêÌïúÎã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'Í≥†Í∏∞Î•º ÍµΩÎäî ÎèÑÏ§ë, ÏñëÎÖêÏùÑ Ïñ∏Ï†ú Î∞îÎ•¥ÎÇò?',
                        options: [
                            'ÍµΩÍ∏∞ Ï†ÑÏóê ÎØ∏Î¶¨ Î∞îÎ•∏Îã§',
                            'Ïñ¥Îäê Ï†ïÎèÑ ÏùµÏùÄ ÌõÑ Î∞îÎ•∏Îã§',
                            'Í±∞Ïùò Îã§ Íµ¨ÏõåÏ°åÏùÑ Îïå Î∞îÎ•∏Îã§',
                            'ÏñëÎÖêÏùÄ Îî∞Î°ú Ï∞çÏñ¥ Î®πÎäîÎã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Ï≤´ Í≥†Í∏∞Î•º ÍµΩÎäî Î∞©ÏãùÏùÄ?',
                        options: [
                            'ÏÑº Î∂àÏóê Îπ†Î•¥Í≤å ÍµΩÎäîÎã§',
                            'Ï§ëÎ∂àÎ°ú Ï≤úÏ≤úÌûà ÍµΩÎäîÎã§',
                            'Í≥ÑÏÜç Îí§ÏßëÏúºÎ©¥ÏÑú ÍµΩÎäîÎã§',
                            'Í±∞Ïùò ÏÜêÎåÄÏßÄ ÏïäÍ≥† ÎëîÎã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Í≥†Í∏∞ Îí§ÏßëÎäî ÌÉÄÏù¥Î∞ç, ÏÇ¨ÎûåÎì§Ïùò ÏÑ†ÌÉùÏùÄ?',
                        options: [
                            'Ïú°Ï¶ô ÎÇòÏò¨ Îïå',
                            'Í≤âÎ©¥Ïù¥ ÏùµÏñ¥ Î≥¥Ïùº Îïå',
                            'ÎàÑÍ∞Ä "Ïù¥Ï†ú Îí§ÏßëÏñ¥ÏïºÏßÄ"ÎùºÍ≥† ÎßêÌï† Îïå',
                            'Í∞êÏúºÎ°ú Í∑∏ÎÉ• Îí§ÏßëÎäîÎã§'
                        ],
                        correct: 1
                    },
                    {
                        q: 'Í≥†Í∏∞Í∞Ä Ï°∞Í∏à ÌÉÄÍ∏∞ ÏãúÏûëÌñàÎã§',
                        options: [
                            'Î∂àÏóêÏÑú Î∞îÎ°ú Î∫ÄÎã§',
                            'ÌÉÑ Î∂ÄÎ∂ÑÎßå ÏûòÎùºÎÇ∏Îã§',
                            'Î∂àÏùÑ ÏïΩÌïòÍ≤å Ï°∞Ï†àÌïúÎã§',
                            '"Ïù¥ Ï†ïÎèÑÎ©¥ Í¥úÏ∞ÆÏïÑ" ÌïòÍ≥† ÎÑòÍ∏¥Îã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'ÎàÑÍµ∞Í∞Ä "ÏïÑÏßÅ Îçú ÏùµÏùÄ Í≤É Í∞ôÏïÑ"ÎùºÍ≥† ÎßêÌïúÎã§',
                        options: [
                            'Îã§Ïãú Ïò¨Î†§ÏÑú Îçî ÍµΩÎäîÎã§',
                            'ÏûòÎùºÏÑú ÌôïÏù∏Ìï¥Î≥∏Îã§',
                            'ÏùºÎã® Î®πÏñ¥Î≥∏Îã§',
                            'Îã§Î•∏ Í≥†Í∏∞Î∂ÄÌÑ∞ Î®πÏûêÍ≥† ÌïúÎã§'
                        ],
                        correct: 0
                    },
                    {
                        q: 'ÍµΩÎäî ÏÇ¨ÎûåÏù¥ Í≥ÑÏÜç Í≥†Í∏∞Îßå Î≥¥Í≥† ÏûàÎã§',
                        options: [
                            '"Ï¢Ä Ïâ¨Ïñ¥"ÎùºÍ≥† ÎßêÌïúÎã§',
                            'ÎåÄÏã† ÍµΩÍ≤†Îã§Í≥† ÌïúÎã§',
                            'Í∑∏ÎÉ• Î®πÍ∏∞Îßå ÌïúÎã§',
                            'ÏÇ¨ÏßÑ Ï∞çÍ≥† Îñ†Îì†Îã§'
                        ],
                        correct: 2
                    },
                    {
                        q: 'ÎßàÏßÄÎßâ Í≥†Í∏∞ Ìïú Ï†êÏù¥ ÎÇ®ÏïòÎã§',
                        options: [
                            'ÍµΩÎçò ÏÇ¨ÎûåÏù¥ Î®πÎäîÎã§',
                            'Îã§ Í∞ôÏù¥ ÎÇòÎà† Î®πÎäîÎã§',
                            'Í∞ÄÏû• Îä¶Í≤å Ïò® ÏÇ¨ÎûåÏù¥ Î®πÎäîÎã§',
                            'ÏÑúÎ°ú ÏñëÎ≥¥ÌïòÎã§ Í≤∞Íµ≠ ÎÇ®Í∏¥Îã§'
                        ],
                        correct: 1
                    }
                ]
            }
        };

        // ========================================
        // Í≤åÏûÑ ÏÉÅÌÉú Î≥ÄÏàò
        // ========================================
        
        let currentScenario = null;
        let currentQuestion = 0;
        let userAnswers = [];
        let correctCount = 0;
        let currentGameId = null;
        let gameTimeLeft = 600; // 10Î∂Ñ (Ï¥à Îã®ÏúÑ)
        let gameTimerInterval = null;
        let attemptCount = 0; // ÎèÑÏ†Ñ ÌöüÏàò Ï∂îÏ†Å

        // Í¥ëÍ≥† Ïø®ÌÉÄÏûÑ Í¥ÄÎ¶¨ (Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄ ÏÇ¨Ïö©)
        const AD_COOLDOWN_DURATION = 60 * 60 * 1000; // 1ÏãúÍ∞Ñ (Î∞ÄÎ¶¨Ï¥à)

        // ========================================
        // Ï¥àÍ∏∞Ìôî
        // ========================================
        
        async function initApp() {
            console.log('Ïï± Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
            // Ïú†Ï†Ä Ï†ïÎ≥¥ Î°úÎìú
            const userInfo = await API.getUserInfo();
            console.log('Ïú†Ï†Ä Ï†ïÎ≥¥:', userInfo);
            if (userInfo) {
                updateUserStats(userInfo);
            }
            
            // Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÏãúÏûë
            startCountdowns();
            
            // Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îçî Ï¥àÍ∏∞Ìôî
            initBannerSlider();
            
            // Í¥ëÍ≥† Î≤ÑÌäº Ï¥àÍ∏∞Ìôî
            initAdButtons();
            
            // Ï§ÄÎπÑÏ§ë ÏãúÎÇòÎ¶¨Ïò§ Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÏãúÏûë
            startUpcomingCountdowns();
        }

        // Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îçî Ï¥àÍ∏∞Ìôî
        let currentBannerIndex = 0;
        let bannerInterval;
        let touchStartX = 0;
        let touchEndX = 0;
        let isDragging = false;

        function initBannerSlider() {
            const track = document.getElementById('bannerTrack');
            const slider = document.querySelector('.top-banner-slider');
            
            if (!track || !slider) {
                console.error('Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îçî ÏóòÎ¶¨Î®ºÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                return;
            }
            
            // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏
            slider.addEventListener('touchstart', handleTouchStart, { passive: true });
            slider.addEventListener('touchmove', handleTouchMove, { passive: false });
            slider.addEventListener('touchend', handleTouchEnd);
            
            // ÎßàÏö∞Ïä§ Ïù¥Î≤§Ìä∏ (Îç∞Ïä§ÌÅ¨ÌÜ±)
            slider.addEventListener('mousedown', handleMouseDown);
            slider.addEventListener('mousemove', handleMouseMove);
            slider.addEventListener('mouseup', handleMouseEnd);
            slider.addEventListener('mouseleave', handleMouseEnd);
            
            startBannerAutoSlide();
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
            isDragging = true;
            document.getElementById('bannerTrack').classList.add('dragging');
            clearInterval(bannerInterval);
        }

        function handleTouchMove(e) {
            if (!isDragging) return;
            touchEndX = e.touches[0].clientX;
        }

        function handleTouchEnd(e) {
            if (!isDragging) return;
            isDragging = false;
            document.getElementById('bannerTrack').classList.remove('dragging');
            
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > 50) { // 50px Ïù¥ÏÉÅ Ïä§ÏôÄÏù¥ÌîÑ
                if (diff > 0) {
                    // ÏôºÏ™ΩÏúºÎ°ú Ïä§ÏôÄÏù¥ÌîÑ (Îã§Ïùå)
                    currentBannerIndex = (currentBannerIndex + 1) % 5;
                } else {
                    // Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïä§ÏôÄÏù¥ÌîÑ (Ïù¥Ï†Ñ)
                    currentBannerIndex = (currentBannerIndex - 1 + 5) % 5;
                }
                updateBannerPosition();
            } else {
                // 50px ÎØ∏Îßå Ïù¥Îèô = ÌÅ¥Î¶≠ÏúºÎ°ú Í∞ÑÏ£º
                handleBannerClick();
            }
            
            startBannerAutoSlide();
        }

        function handleMouseDown(e) {
            touchStartX = e.clientX;
            isDragging = true;
            document.getElementById('bannerTrack').classList.add('dragging');
            clearInterval(bannerInterval);
        }

        function handleMouseMove(e) {
            if (!isDragging) return;
            touchEndX = e.clientX;
        }

        function handleMouseEnd(e) {
            if (!isDragging) return;
            isDragging = false;
            document.getElementById('bannerTrack').classList.remove('dragging');
            
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    currentBannerIndex = (currentBannerIndex + 1) % 5;
                } else {
                    currentBannerIndex = (currentBannerIndex - 1 + 5) % 5;
                }
                updateBannerPosition();
            } else {
                // 50px ÎØ∏Îßå Ïù¥Îèô = ÌÅ¥Î¶≠ÏúºÎ°ú Í∞ÑÏ£º
                handleBannerClick();
            }
            
            startBannerAutoSlide();
        }

        function handleBannerClick() {
            // ÌòÑÏû¨ Î∞∞ÎÑàÏùò ÎßÅÌÅ¨Î°ú Ïù¥Îèô
            const bannerLinks = [
                'https://www.naver.com',
                'https://www.naver.com',
                'https://www.naver.com',
                'https://www.naver.com',
                'https://www.naver.com'
            ];
            
            const link = bannerLinks[currentBannerIndex];
            if (link.startsWith('#')) {
                // ÎÇ¥Î∂Ä ÎßÅÌÅ¨
                const screen = link.substring(1);
                switchScreen(screen);
            } else {
                // Ïô∏Î∂Ä ÎßÅÌÅ¨
                window.open(link, '_blank');
            }
        }

        function startBannerAutoSlide() {
            clearInterval(bannerInterval);
            bannerInterval = setInterval(() => {
                currentBannerIndex = (currentBannerIndex + 1) % 5;
                updateBannerPosition();
            }, 5000); // 5Ï¥àÎßàÎã§ ÏûêÎèô Ïä¨ÎùºÏù¥Îìú
        }

        function goToBanner(index) {
            currentBannerIndex = index;
            updateBannerPosition();
            // ÏûêÎèô Ïä¨ÎùºÏù¥Îìú Ïû¨ÏãúÏûë
            startBannerAutoSlide();
        }

        function updateBannerPosition() {
            const track = document.getElementById('bannerTrack');
            const dots = document.querySelectorAll('.banner-dot');
            
            if (!track) {
                console.error('bannerTrackÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                return;
            }
            
            track.style.transform = `translateX(-${currentBannerIndex * 100}%)`;
            
            dots.forEach((dot, index) => {
                if (index === currentBannerIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function navigateBanner(url) {
            if (url.startsWith('#')) {
                // ÎÇ¥Î∂Ä ÎßÅÌÅ¨
                const screen = url.substring(1);
                switchScreen(screen);
            } else {
                // Ïô∏Î∂Ä ÎßÅÌÅ¨
                window.open(url, '_blank');
            }
        }

        // Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÌÉÄÏù¥Î®∏
        function startCountdowns() {
            // ÏûÑÏãú: 2ÏãúÍ∞Ñ 50Î∂Ñ Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Ï¢ÖÎ£å ÏãúÍ∞ÑÏùÑ Î∞õÏïÑÏôÄÏïº Ìï®)
            // ÏÑúÎ≤Ñ ÏùëÎãµ ÏòàÏãú: { endTime: '2026-02-07T15:30:00Z' }
            
            const countdowns = {
                'weddingCountdown': 2 * 60 * 60 + 50 * 60, // 2ÏãúÍ∞Ñ 50Î∂Ñ (10200Ï¥à)
                'blindDateCountdown': 2 * 60 * 60 + 50 * 60,
                'bbqCountdown': 2 * 60 * 60 + 50 * 60
            };
            
            Object.keys(countdowns).forEach(id => {
                let timeLeft = countdowns[id];
                
                const updateTimer = () => {
                    if (timeLeft <= 0) {
                        document.getElementById(id).textContent = 'Ï¢ÖÎ£åÎê®';
                        return;
                    }
                    
                    const hours = Math.floor(timeLeft / 3600);
                    const minutes = Math.floor((timeLeft % 3600) / 60);
                    const seconds = timeLeft % 60;
                    
                    const timeString = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    document.getElementById(id).textContent = timeString;
                    
                    timeLeft--;
                };
                
                updateTimer();
                setInterval(updateTimer, 1000);
            });
        }

        // Ïú†Ï†Ä Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
        function updateUserStats(data) {
            console.log('Ïú†Ï†Ä Ïä§ÌÉØ ÏóÖÎç∞Ïù¥Ìä∏:', data);
            if (data.coins !== undefined) {
                document.getElementById('coinCount').textContent = data.coins;
            }
            if (data.rewardPoints !== undefined) {
                document.getElementById('rewardPoints').textContent = data.rewardPoints;
            }
            if (data.tickets !== undefined) {
                document.getElementById('ticketCount').textContent = data.tickets;
            }
        }

        // ========================================
        // ÌôîÎ©¥ Ï†ÑÌôò
        // ========================================
        
        function switchScreen(screenName) {
            // Î™®Îì† ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÏïÑÏù¥ÌÖú ÎπÑÌôúÏÑ±Ìôî
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('shopScreen').classList.remove('active');
            document.getElementById('rankingScreen').classList.remove('active');
            document.getElementById('profileScreen').classList.remove('active');
            document.getElementById('settingsScreen').classList.remove('active');
            
            // ÏÑ†ÌÉùÎêú ÌôîÎ©¥ ÌëúÏãú
            const screenMap = {
                'shop': 'shopScreen',
                'ranking': 'rankingScreen',
                'home': 'homeScreen',
                'profile': 'profileScreen',
                'settings': 'settingsScreen'
            };
            
            const targetScreen = screenMap[screenName];
            if (targetScreen) {
                document.getElementById(targetScreen).classList.add('active');
            }
            
            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌôúÏÑ±Ìôî (Ïù¥Î≤§Ìä∏ ÌÉÄÍ≤ü Ï∞æÍ∏∞)
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                const onclick = item.getAttribute('onclick');
                if (onclick && onclick.includes(`'${screenName}'`)) {
                    item.classList.add('active');
                }
            });
            
            // Ìôà ÌôîÎ©¥Ïùº ÎïåÎäî ÌïòÎã® Î©îÎâ¥ Î≥¥Ïù¥Í∏∞
            const bottomNav = document.querySelector('.bottom-nav');
            if (screenName === 'home') {
                bottomNav.classList.remove('hidden');
            }
        }

        // ========================================
        // Í≤åÏûÑ Î°úÏßÅ
        // ========================================
        
        let pendingScenarioId = null;

        function startGame(scenarioId) {
            console.log('startGame Ìò∏Ï∂ú:', scenarioId);
            console.log('scenarioId ÌÉÄÏûÖ:', typeof scenarioId);
            console.log('scenarios Í∞ùÏ≤¥ ÌÇ§Îì§:', Object.keys(scenarios));
            
            // ÏãúÎÇòÎ¶¨Ïò§ ID Ï†ÄÏû•
            pendingScenarioId = scenarioId;
            console.log('pendingScenarioId Ï†ÄÏû•:', pendingScenarioId);
            
            // ÌôïÏù∏ ÌåùÏóÖ ÌëúÏãú
            const popup = document.getElementById('gameStartPopup');
            console.log('ÌåùÏóÖ ÏóòÎ¶¨Î®ºÌä∏:', popup);
            
            if (popup) {
                popup.classList.add('active');
                console.log('ÌåùÏóÖ ÌëúÏãúÎê®');
            } else {
                console.error('ÌåùÏóÖÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
            }
        }

        function closeGameStartPopup() {
            document.getElementById('gameStartPopup').classList.remove('active');
            pendingScenarioId = null;
        }

        async function confirmGameStart() {
            console.log('confirmGameStart Ìò∏Ï∂ú');
            console.log('pendingScenarioId (Îã´Í∏∞ Ï†Ñ):', pendingScenarioId);
            
            // pendingScenarioIdÎ•º Î®ºÏ†Ä Ï†ÄÏû• (ÌåùÏóÖ Îã´ÏúºÎ©¥ nullÏù¥ ÎêòÎØÄÎ°ú)
            const scenarioId = pendingScenarioId;
            console.log('scenarioId Ï†ÄÏû•:', scenarioId);
            
            // ÌåùÏóÖ Îã´Í∏∞
            closeGameStartPopup();
            
            if (!scenarioId) {
                console.error('ÏãúÎÇòÎ¶¨Ïò§ IDÍ∞Ä ÏóÜÏäµÎãàÎã§');
                alert('ÏãúÎÇòÎ¶¨Ïò§Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            // Ìã∞Ïºì ÌôïÏù∏
            const currentTickets = parseInt(document.getElementById('ticketCount').textContent);
            if (currentTickets <= 0) {
                alert('Ìã∞ÏºìÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§. Í¥ëÍ≥†Î•º ÏãúÏ≤≠ÌïòÍ±∞ÎÇò Ìã∞ÏºìÏùÑ Íµ¨Îß§Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            // APIÎ•º ÌÜµÌïú Í≤åÏûÑ ÏãúÏûë Î∞è Ìã∞Ïºì Ï∞®Í∞ê
            const result = await API.startGame(scenarioId);
            if (!result.success) {
                alert(result.message || 'Í≤åÏûÑÏùÑ ÏãúÏûëÌï† Ïàò ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            // Ìã∞Ïºì Ï∞®Í∞ê
            updateUserStats({ tickets: currentTickets - 1 });
            
            currentGameId = result.gameId;
            
            // scenarios Í∞ùÏ≤¥ ÌôïÏù∏
            console.log('scenarios Í∞ùÏ≤¥:', scenarios);
            console.log('scenarios[scenarioId]:', scenarios[scenarioId]);
            
            currentScenario = scenarios[scenarioId];
            
            if (!currentScenario) {
                console.error('ÏãúÎÇòÎ¶¨Ïò§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§:', scenarioId);
                alert('ÏãúÎÇòÎ¶¨Ïò§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            currentQuestion = 0;
            userAnswers = [];
            correctCount = 0;

            console.log('currentScenario ÏÑ§Ï†ï ÏôÑÎ£å:', currentScenario);

            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            
            console.log('Í≤åÏûÑ ÌôîÎ©¥ÏúºÎ°ú Ï†ÑÌôò');
            
            // ÌïòÎã® Î©îÎâ¥ Ïà®Í∏∞Í∏∞ Î∞è Î©îÏù∏ ÏΩòÌÖêÏ∏† Ìå®Îî© Ï†úÍ±∞
            document.querySelector('.bottom-nav').classList.add('hidden');
            document.querySelector('.main-content').classList.add('no-padding');
            
            // ÌîåÎ†àÏù¥ ÌÉÄÏù¥Î®∏ ÏãúÏûë
            startGameTimer();
            
            loadQuestion();
        }

        // Í≤åÏûÑ ÌîåÎ†àÏù¥ ÌÉÄÏù¥Î®∏
        function startGameTimer() {
            console.log('ÌÉÄÏù¥Î®∏ ÏãúÏûë');
            gameTimeLeft = 600; // 10Î∂Ñ Ï¥àÍ∏∞Ìôî
            const timerElement = document.getElementById('gameTimer');
            console.log('ÌÉÄÏù¥Î®∏ ÏóòÎ¶¨Î®ºÌä∏:', timerElement);
            
            if (!timerElement) {
                console.error('ÌÉÄÏù¥Î®∏ ÏóòÎ¶¨Î®ºÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                return;
            }
            
            timerElement.classList.add('active');
            
            // Í∏∞Ï°¥ Ïù∏ÌÑ∞Î≤å Ï†ïÎ¶¨
            if (gameTimerInterval) {
                clearInterval(gameTimerInterval);
            }
            
            const updateGameTimer = () => {
                console.log('ÌÉÄÏù¥Î®∏ ÏóÖÎç∞Ïù¥Ìä∏:', gameTimeLeft);
                
                if (gameTimeLeft <= 0) {
                    clearInterval(gameTimerInterval);
                    timerElement.textContent = 'ÏãúÍ∞Ñ Ï¢ÖÎ£å';
                    // ÏãúÍ∞Ñ Ï¢ÖÎ£å ÌåùÏóÖ ÌëúÏãú
                    showTimeoutPopup();
                    return;
                }
                
                const minutes = Math.floor(gameTimeLeft / 60);
                const seconds = gameTimeLeft % 60;
                timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                gameTimeLeft--;
            };
            
            updateGameTimer();
            gameTimerInterval = setInterval(updateGameTimer, 1000);
            console.log('ÌÉÄÏù¥Î®∏ Ïù∏ÌÑ∞Î≤å ÏÑ§Ï†ïÎê®:', gameTimerInterval);
        }

        // ÏãúÍ∞Ñ Ï¢ÖÎ£å ÌåùÏóÖ ÌëúÏãú
        function showTimeoutPopup() {
            document.getElementById('timeoutPopup').classList.add('active');
        }

        // ÏãúÍ∞Ñ Ï¢ÖÎ£å ÌåùÏóÖ Îã´Í∏∞ Î∞è Î©îÏù∏ ÌôîÎ©¥ÏúºÎ°ú
        function closeTimeoutPopup() {
            document.getElementById('timeoutPopup').classList.remove('active');
            backToHome();
        }

        // Í≤åÏûÑ ÌÉÄÏù¥Î®∏ Ï†ïÏßÄ
        function stopGameTimer() {
            if (gameTimerInterval) {
                clearInterval(gameTimerInterval);
                gameTimerInterval = null;
            }
            document.getElementById('gameTimer').classList.remove('active');
        }

        function loadQuestion() {
            console.log('loadQuestion Ìò∏Ï∂ú');
            console.log('currentScenario:', currentScenario);
            console.log('currentQuestion:', currentQuestion);
            
            if (!currentScenario || !currentScenario.questions) {
                console.error('currentScenarioÍ∞Ä Ï†ïÏùòÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§');
                return;
            }
            
            const question = currentScenario.questions[currentQuestion];
            console.log('ÏßàÎ¨∏:', question);
            
            // Î∞∞ÎÑà Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï (Ïï†ÎãàÎ©îÏù¥ÏÖò ÏòÅÏó≠ Î∞∞Í≤ΩÏúºÎ°ú)
            const animationArea = document.querySelector('.animation-area');
            if (animationArea) {
                animationArea.style.backgroundImage = `url('${currentScenario.bannerImage}')`;
                animationArea.style.backgroundSize = 'cover';
                animationArea.style.backgroundPosition = 'center';
                console.log('Î∞∞ÎÑà Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï:', currentScenario.bannerImage);
            } else {
                console.error('animation-areaÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
            }
            
            // Ïï†ÎãàÎ©îÏù¥ÏÖò Ïù¥ÎØ∏ÏßÄ Ïà®ÍπÄ (Ïù¥Î™®ÏßÄ ÏïÑÏù¥ÏΩò Ï†úÍ±∞)
            const animImage = document.getElementById('animationImage');
            if (animImage) {
                animImage.style.display = 'none';
            }
            
            // Ïª®ÌÖçÏä§Ìä∏ Ïò§Î≤ÑÎ†àÏù¥ ÌëúÏãú (Ï≤´ ÏßàÎ¨∏ÏóêÎßå)
            const contextOverlay = document.getElementById('contextOverlay');
            if (currentQuestion === 0) {
                document.getElementById('contextTitle').textContent = currentScenario.contextTitle;
                document.getElementById('contextSubtitle').textContent = currentScenario.contextSubtitle;
                if (contextOverlay) {
                    contextOverlay.style.display = 'block';
                }
            } else {
                if (contextOverlay) {
                    contextOverlay.style.display = 'none';
                }
            }
            
            // ÏßÑÌñâÎ∞î ÏóÖÎç∞Ïù¥Ìä∏
            const progress = ((currentQuestion + 1) / currentScenario.questions.length) * 100;
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
            
            // ÏßàÎ¨∏ ÌëúÏãú
            const questionNumber = document.getElementById('questionNumber');
            const questionText = document.getElementById('questionText');
            
            if (questionNumber) {
                questionNumber.textContent = `ÏßàÎ¨∏ ${currentQuestion + 1}/${currentScenario.questions.length}`;
                console.log('ÏßàÎ¨∏ Î≤àÌò∏ ÏÑ§Ï†ï:', questionNumber.textContent);
            }
            
            if (questionText) {
                questionText.textContent = question.q;
                console.log('ÏßàÎ¨∏ ÌÖçÏä§Ìä∏ ÏÑ§Ï†ï:', question.q);
            }
            
            // ÏÑ†ÌÉùÏßÄ ÌëúÏãú
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer) {
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.textContent = option;
                    optionDiv.onclick = () => selectOption(index, optionDiv);
                    optionsContainer.appendChild(optionDiv);
                });
                console.log('ÏÑ†ÌÉùÏßÄ ÏÉùÏÑ± ÏôÑÎ£å:', question.options.length + 'Í∞ú');
            } else {
                console.error('optionsContainerÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
            }
            
            // Îã§Ïùå Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                nextBtn.classList.remove('active');
                
                // ÎßàÏßÄÎßâ Î¨∏Ï†úÏùº Îïå Î≤ÑÌäº ÌÖçÏä§Ìä∏ Î≥ÄÍ≤Ω
                if (currentQuestion === currentScenario.questions.length - 1) {
                    nextBtn.textContent = 'ÏÑ†ÌÉù ÏôÑÎ£å';
                } else {
                    nextBtn.textContent = 'Îã§Ïùå ÏßàÎ¨∏';
                }
            }
        }

        async function selectOption(index, element) {
            // Ïù¥Ï†Ñ ÏÑ†ÌÉù Ï†úÍ±∞
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // ÌòÑÏû¨ ÏÑ†ÌÉù ÌëúÏãú
            element.classList.add('selected');
            userAnswers[currentQuestion] = index;
            
            // ÏÑúÎ≤ÑÏóê ÎãµÎ≥Ä Ï†úÏ∂ú (ÎπÑÎèôÍ∏∞)
            await API.submitAnswer(currentGameId, currentQuestion, index);
            
            // Îã§Ïùå Î≤ÑÌäº ÌôúÏÑ±Ìôî
            document.getElementById('nextBtn').classList.add('active');
        }

        async function nextQuestion() {
            if (userAnswers[currentQuestion] === undefined) return;
            
            // Ï†ïÎãµ Ï≤¥ÌÅ¨ (ÏûÑÏãú - Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Ï≤òÎ¶¨)
            const question = currentScenario.questions[currentQuestion];
            if (userAnswers[currentQuestion] === question.correct) {
                correctCount++;
            }
            
            currentQuestion++;
            
            if (currentQuestion < currentScenario.questions.length) {
                loadQuestion();
            } else {
                await showResult();
            }
        }

        async function showResult() {
            document.getElementById('gameScreen').classList.remove('active');
            
            // Í≤åÏûÑ ÌÉÄÏù¥Î®∏ Ï†ïÏßÄ
            stopGameTimer();
            
            // ÏÑúÎ≤ÑÏóêÏÑú Í≤∞Í≥º Î∞õÍ∏∞
            const result = await API.completeGame(currentGameId, userAnswers);
            
            if (result) {
                if (result.status === 'pending') {
                    // Ïù¥Î≤§Ìä∏ ÏßÑÌñâ Ï§ë
                    showPendingResult(result);
                } else {
                    // Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ
                    showFinalResult(result);
                }
                
                document.getElementById('resultScreen').classList.add('active');
            }
        }

        // Ïù¥Î≤§Ìä∏ ÏßÑÌñâ Ï§ë Í≤∞Í≥º ÌôîÎ©¥
        function showPendingResult(result) {
            // Î∞∞ÎÑà Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
            const bannerImg = document.getElementById('resultBannerImg');
            bannerImg.style.backgroundImage = `url('${currentScenario.bannerImage}')`;
            
            document.getElementById('resultEmoji').style.display = 'none';
            document.getElementById('resultTitle').textContent = 'ÏÇ¨ÎûåÎì§ÏùÄ ÎãπÏã†Í≥º Í∞ôÏùÄ ÏÑ†ÌÉùÏùÑ ÌñàÏùÑÍπåÏöî?';
            document.getElementById('resultSubtitle').innerHTML = 'Ïù¥ Ïù¥Î≤§Ìä∏Îäî ÏïÑÏßÅ ÏßÑÌñâ Ï§ëÏûÖÎãàÎã§<br>Í≤∞Í≥ºÎäî Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ Í≥µÍ∞úÎê©ÎãàÎã§';
            
            document.getElementById('totalParticipants').textContent = result.totalParticipants.toLocaleString();
            
            // Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å Ïπ¥Ïö¥Ìä∏Îã§Ïö¥
            let timeLeft = result.eventTimeLeft;
            const updateEventTimer = () => {
                if (timeLeft <= 0) {
                    document.getElementById('eventTimeLeft').textContent = 'Í≥ß Í≥µÍ∞úÎê©ÎãàÎã§';
                    return;
                }
                
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById('eventTimeLeft').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                timeLeft--;
            };
            
            updateEventTimer();
            setInterval(updateEventTimer, 1000);
            
            // ÏßÑÌñâ Ï§ë ÏΩòÌÖêÏ∏† ÌëúÏãú
            document.getElementById('pendingContent').style.display = 'block';
            document.getElementById('winnerContent').style.display = 'none';
            document.getElementById('loserContent').style.display = 'none';
            document.getElementById('pendingMessage').style.display = 'block';
        }

        // Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å ÌõÑ ÏµúÏ¢Ö Í≤∞Í≥º ÌôîÎ©¥
        async function showFinalResult(result) {
            document.getElementById('pendingMessage').style.display = 'none';
            
            // ÎèÑÏ†Ñ ÌöüÏàò Ï¶ùÍ∞Ä
            attemptCount++;
            
            // ÎèÑÏ†Ñ ÏãúÍ∞Ñ ÏÉùÏÑ±
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            const attemptInfo = `ÎèÑÏ†Ñ #${attemptCount} ¬∑ ${timeString}`;
            
            // Î∞∞ÎÑà Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
            const bannerImg = document.getElementById('resultBannerImg');
            bannerImg.style.backgroundImage = `url('${currentScenario.bannerImage}')`;
            
            if (result.isWinner) {
                // ÏäπÏûê
                document.getElementById('resultEmoji').style.display = 'none';
                document.getElementById('resultTitle').textContent = 'üéä Ï∂ïÌïòÌï©ÎãàÎã§! ÎãπÏã†ÏùÄ Í∞ÄÏû• ÎåÄÏ§ëÏ†ÅÏù∏ Ïù∏Í∞ÑÏûÖÎãàÎã§ üéä';
                document.getElementById('resultSubtitle').textContent = 'Ï†Ñ ÏÑ∏Í≥Ñ ÏÇ¨ÎûåÎì§Ïùò ÌåêÎã® ÌùêÎ¶ÑÏùÑ ÏôÑÎ≤ΩÌïòÍ≤å ÏùΩÏñ¥ÎÉàÏñ¥Ïöî! ÎãπÏã†ÏùÄ Ìä∏Î†åÎìúÏùò Ï§ëÏã¨Ïóê ÏûàÏäµÎãàÎã§.';
                
                // ÎèÑÏ†Ñ Ï†ïÎ≥¥ ÌëúÏãú
                document.getElementById('attemptInfoWin').textContent = attemptInfo;
                
                // 1/n ÏÉÅÍ∏à Í≥ÑÏÇ∞ (Ï¥ù ÏÉÅÍ∏à ÌíÄÏùÑ ÏäπÏûê ÏàòÎ°ú ÎÇòÎàî)
                const totalPool = 1000; // Ï¥ù ÏÉÅÍ∏à ÌíÄ (ÏòàÏãú)
                const rewardPerWinner = (totalPool / result.totalWinners).toFixed(2);
                
                // Î¶¨ÏõåÎìú Ìè¨Ïù∏Ìä∏ Í≥ÑÏÇ∞ (Î¨∏Ï†úÎãπ 10Ï†ê)
                const earnedPoints = result.correctCount * 10;
                
                document.getElementById('rewardAmount').textContent = rewardPerWinner + ' USDT';
                document.getElementById('totalWinners').textContent = result.totalWinners.toLocaleString();
                document.getElementById('correctAnswers').textContent = `${result.correctCount} / ${result.totalQuestions}`;
                document.getElementById('earnedPointsWin').textContent = earnedPoints;
                
                // Î¨∏Ï†úÎ≥Ñ Í≤∞Í≥º ÌëúÏãú (Ï†ÑÎ∂Ä Ï†ïÎãµÏù¥ÎØÄÎ°ú Í∞ÑÎã®ÌïòÍ≤å)
                const resultsHtml = result.questionResults.map((qr, idx) => `
                    <div class="question-result">
                        <span class="question-result-icon">‚úÖ</span>
                        <div class="question-result-content">
                            <div class="question-result-title">Q${qr.questionNumber}. ${qr.question}</div>
                            <div class="question-result-answer">${qr.userAnswer}</div>
                        </div>
                        <span class="question-result-percent">${qr.userPercentage}%</span>
                    </div>
                `).join('');
                
                document.getElementById('questionResults').innerHTML = resultsHtml;
                
                document.getElementById('pendingContent').style.display = 'none';
                document.getElementById('winnerContent').style.display = 'block';
                document.getElementById('loserContent').style.display = 'none';
                
                // Ïú†Ï†Ä Ïä§ÌÉØ ÏóÖÎç∞Ïù¥Ìä∏
                const currentCoins = parseInt(document.getElementById('coinCount').textContent);
                const currentPoints = parseInt(document.getElementById('rewardPoints').textContent);
                updateUserStats({
                    coins: currentCoins + Math.floor(parseFloat(rewardPerWinner)),
                    rewardPoints: currentPoints + earnedPoints
                });
            } else {
                // Ìå®Î∞∞ (Í∏çÏ†ïÏ†Å Î©îÏãúÏßÄ)
                // Ïú†Ï†Ä ÎãâÎÑ§ÏûÑ Í∞ÄÏ†∏Ïò§Í∏∞ (ÏûÑÏãúÎ°ú 'Player'ÏÇ¨Ïö©, Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú)
                const userName = 'Player'; // Ïã§Ï†úÎ°úÎäî APIÏóêÏÑú Î∞õÏïÑÏò¨ Ïú†Ï†Ä ÎãâÎÑ§ÏûÑ
                
                // ÎèÑÏ†Ñ Ï†ïÎ≥¥ ÌëúÏãú
                document.getElementById('attemptInfoLose').textContent = attemptInfo;
                
                document.getElementById('resultEmoji').style.display = 'none';
                document.getElementById('resultTitle').textContent = `${userName}ÎãòÏùÄ ÎèÖÌäπÌïú ÏãúÍ∞ÅÏùÑ Í∞ÄÏßÑ Î∂ÑÏù¥ÎÑ§Ïöî! üé®`;
                document.getElementById('resultSubtitle').textContent = 'ÎåÄÏ§ëÍ≥º Îã§Î•∏ ÏÑ†ÌÉùÏùÑ ÌïòÏÖ®Ïñ¥Ïöî. ÌïòÏßÄÎßå Í±±Ï†ï ÎßàÏÑ∏Ïöî! ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÇ¨ÎûåÎì§ÎèÑ Ïù¥ ÏßÄÏ†êÏóêÏÑú ÏùòÍ≤¨Ïù¥ Í∞àÎ†∏ÎãµÎãàÎã§.';
                
                // Î¶¨ÏõåÎìú Ìè¨Ïù∏Ìä∏ Í≥ÑÏÇ∞ (Î¨∏Ï†úÎãπ 10Ï†ê)
                const earnedPoints = result.correctCount * 10;
                
                document.getElementById('correctAnswersLose').textContent = `${result.correctCount} / ${result.totalQuestions}`;
                document.getElementById('earnedPointsLose').textContent = earnedPoints;
                
                // Î¨∏Ï†úÎ≥Ñ Í≤∞Í≥º ÌëúÏãú
                const resultsHtml = result.questionResults.map((qr, idx) => `
                    <div class="question-result">
                        <span class="question-result-icon">${qr.isCorrect ? '‚úÖ' : '‚ùå'}</span>
                        <div class="question-result-content">
                            <div class="question-result-title">Q${qr.questionNumber}. ${qr.question}</div>
                            <div class="question-result-answer">${qr.isCorrect ? qr.userAnswer : qr.correctAnswer} (${qr.isCorrect ? qr.userPercentage : qr.correctPercentage}%)</div>
                        </div>
                        ${!qr.isCorrect ? `<span class="question-result-percent">ÎÇ¥ ÏÑ†ÌÉù: ${qr.userPercentage}%</span>` : ''}
                    </div>
                `).join('');
                
                document.getElementById('questionResultsLose').innerHTML = resultsHtml;
                
                document.getElementById('pendingContent').style.display = 'none';
                document.getElementById('winnerContent').style.display = 'none';
                document.getElementById('loserContent').style.display = 'block';
                
                // Ïú†Ï†Ä Ïä§ÌÉØ ÏóÖÎç∞Ïù¥Ìä∏ (Î¶¨ÏõåÎìú Ìè¨Ïù∏Ìä∏Îßå)
                const currentPoints = parseInt(document.getElementById('rewardPoints').textContent);
                updateUserStats({
                    rewardPoints: currentPoints + earnedPoints
                });
            }
        }

        // Ïï°ÏÖò Î≤ÑÌäº Ìï®ÏàòÎì§
        function retryGame() {
            // Ìã∞Ïºì Ï∞®Í∞ê
            const currentTickets = parseInt(document.getElementById('ticketCount').textContent);
            if (currentTickets > 0) {
                updateUserStats({ tickets: currentTickets - 1 });
                
                // Í≤åÏûÑ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
                currentQuestion = 0;
                userAnswers = [];
                correctCount = 0;
                
                // Í≤∞Í≥º ÌôîÎ©¥ Ïà®Í∏∞Í≥† Í≤åÏûÑ ÌôîÎ©¥ ÌëúÏãú
                document.getElementById('resultScreen').classList.remove('active');
                document.getElementById('gameScreen').classList.add('active');
                
                // ÌÉÄÏù¥Î®∏ Ïû¨ÏãúÏûë
                startGameTimer();
                
                // Ï≤´ Î¨∏Ï†ú Î°úÎìú
                loadQuestion();
            } else {
                alert('Ìã∞ÏºìÏù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§. Í¥ëÍ≥†Î•º ÏãúÏ≤≠ÌïòÍ±∞ÎÇò Ìã∞ÏºìÏùÑ Íµ¨Îß§Ìï¥Ï£ºÏÑ∏Ïöî.');
            }
        }

        function notifyNextEvent() {
            document.getElementById('notificationPopup').classList.add('active');
        }

        function closeNotificationPopup() {
            document.getElementById('notificationPopup').classList.remove('active');
        }

        async function confirmNotification() {
            // ÏïåÎ¶º Í∂åÌïú ÌôïÏù∏
            if (!("Notification" in window)) {
                alert("Ïù¥ Î∏åÎùºÏö∞Ï†ÄÎäî ÏïåÎ¶ºÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.");
                closeNotificationPopup();
                return;
            }

            try {
                const permission = await Notification.requestPermission();
                
                if (permission === "granted") {
                    // ÏïåÎ¶º ÏÑ§Ï†ï API Ìò∏Ï∂ú (ÏÑúÎ≤Ñ)
                    // await API.setNotification(...)
                    
                    alert("‚úÖ ÏïåÎ¶ºÏù¥ ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!\nÎã§Ïùå Ïù¥Î≤§Ìä∏ ÏãúÏûë 10Î∂Ñ Ï†ÑÏóê ÏïåÎ†§ÎìúÎ¶¥Í≤åÏöî.");
                    closeNotificationPopup();
                } else if (permission === "denied") {
                    alert("‚ùå ÏïåÎ¶º Í∂åÌïúÏù¥ Í±∞Î∂ÄÎêòÏóàÏäµÎãàÎã§.\n\nÎ∏åÎùºÏö∞Ï†Ä ÏÑ§Ï†ïÏóêÏÑú ÏïåÎ¶º Í∂åÌïúÏùÑ ÌóàÏö©Ìï¥Ï£ºÏÑ∏Ïöî.");
                    closeNotificationPopup();
                } else {
                    closeNotificationPopup();
                }
            } catch (error) {
                console.error("ÏïåÎ¶º Í∂åÌïú ÏöîÏ≤≠ Ïã§Ìå®:", error);
                alert("ÏïåÎ¶º ÏÑ§Ï†ï Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.");
                closeNotificationPopup();
            }
        }

        function shareResult() {
            // ÌòÑÏû¨ Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
            const isWinner = document.getElementById('winnerContent').style.display !== 'none';
            
            let shareText = '';
            const gameUrl = window.location.href;
            
            if (isWinner) {
                const rewardAmount = document.getElementById('rewardAmount').textContent;
                const correctAnswers = document.getElementById('correctAnswers').textContent;
                const totalWinners = document.getElementById('totalWinners').textContent;
                
                shareText = `üèÜ ÎåÄÏ§ëÏ†Å Ïù∏Í∞Ñ Í≤åÏûÑ Í≤∞Í≥º üèÜ

‚úÖ ÎãπÏã†ÏùÄ ÎåÄÏ§ëÏ†Å Ïù∏Í∞ÑÏûÖÎãàÎã§!
Ï†Ñ ÏÑ∏Í≥Ñ ÏÇ¨ÎûåÎì§Ïùò ÌåêÎã® ÌùêÎ¶ÑÏùÑ ÎÅùÍπåÏßÄ ÏùΩÏóàÏäµÎãàÎã§.

üí∞ ÌöçÎìù ÏÉÅÍ∏à: ${rewardAmount}
üìä Ï†ïÎãµÎ•†: ${correctAnswers}
üë• Ï¥ù ÏäπÏûê: ${totalWinners}Î™Ö Ï§ë Ìïú Î™Ö

ÏãúÎÇòÎ¶¨Ïò§: ${currentScenario.name}

ÎÇòÎèÑ ÎèÑÏ†ÑÌï¥Î≥¥Í∏∞ üëá
${gameUrl}`;
            } else {
                const correctAnswers = document.getElementById('correctAnswersLose').textContent;
                
                shareText = `üß† ÎåÄÏ§ëÏ†Å Ïù∏Í∞Ñ Í≤åÏûÑ Í≤∞Í≥º

ÎãπÏã†ÏùÄ ÎåÄÏ§ëÍ≥º Îã§Î•∏ ÏÑ†ÌÉùÏùÑ ÌñàÏäµÎãàÎã§.
ÌïòÏßÄÎßå, ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÇ¨ÎûåÎèÑ Ïù¥ ÏßÄÏ†êÏóêÏÑú Í∞àÎ†∏ÏäµÎãàÎã§!

üìä Ï†ïÎãµÎ•†: ${correctAnswers}
ÏãúÎÇòÎ¶¨Ïò§: ${currentScenario.name}

Îã§Ïãú ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî üëá
${gameUrl}`;
            }
            
            document.getElementById('shareText').textContent = shareText;
            document.getElementById('sharePopup').classList.add('active');
        }

        function closeSharePopup() {
            document.getElementById('sharePopup').classList.remove('active');
        }

        async function copyShareText() {
            const shareText = document.getElementById('shareText').textContent;
            
            try {
                await navigator.clipboard.writeText(shareText);
                alert('‚úÖ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!\nÏõêÌïòÎäî Í≥≥Ïóê Î∂ôÏó¨ÎÑ£Í∏∞ ÌïòÏÑ∏Ïöî.');
                closeSharePopup();
            } catch (error) {
                // Ìè¥Î∞±: Íµ¨Ïãù Î∞©Î≤ï
                const textarea = document.createElement('textarea');
                textarea.value = shareText;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    document.execCommand('copy');
                    alert('‚úÖ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!\nÏõêÌïòÎäî Í≥≥Ïóê Î∂ôÏó¨ÎÑ£Í∏∞ ÌïòÏÑ∏Ïöî.');
                    closeSharePopup();
                } catch (err) {
                    alert('‚ùå Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.\nÏàòÎèôÏúºÎ°ú Î≥µÏÇ¨Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                document.body.removeChild(textarea);
            }
        }

        function shareEvent() {
            const shareText = `üéÆ ÎåÄÏ§ëÏ†Å Ïù∏Í∞Ñ - Ìä∏Î†åÎìú ÏòàÏ∏° Í≤åÏûÑ

"ÏÇ¨ÎûåÎì§ÏùÄ ÎãπÏã†Í≥º Í∞ôÏùÄ ÏÑ†ÌÉùÏùÑ Ìï†ÍπåÏöî?"

ÏßÄÍ∏à Ï∞∏Ïó¨ Ï§ë: 128,492Î™Ö
üí∞ ÏÉÅÍ∏à ÌíÄ: 1,000 USDT

ÎÇòÎèÑ Ï∞∏Ïó¨ÌïòÍ∏∞ üëá
${window.location.href}`;
            
            document.getElementById('shareText').textContent = shareText;
            document.getElementById('sharePopup').classList.add('active');
        }

        // ÎÇ¥ ÏÑ†ÌÉù Î≥¥Í∏∞ ÌÜ†Í∏Ä
        function toggleMyChoices(type) {
            const contentId = type === 'win' ? 'myChoicesContentWin' : 'myChoicesContentLose';
            const arrowId = type === 'win' ? 'dropdownArrowWin' : 'dropdownArrowLose';
            
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                arrow.classList.add('open');
            } else {
                content.style.display = 'none';
                arrow.classList.remove('open');
            }
        }

        // Í¥ëÍ≥† ÏãúÏ≤≠
        function watchAd(slotNumber) {
            const btn = document.getElementById(`adRewardBtn${slotNumber}`);
            const icon = btn.querySelector('.ad-reward-icon');
            const text = btn.querySelector('.ad-reward-text');
            
            if (btn.classList.contains('cooldown')) {
                const cooldownDiv = document.getElementById(`adCooldown${slotNumber}`);
                showToast(`‚è∞ Ïø®ÌÉÄÏûÑ: ${cooldownDiv.textContent}`);
                return;
            }
            
            if (btn.classList.contains('loading')) {
                return; // Ïù¥ÎØ∏ Î°úÎî© Ï§ë
            }
            
            // Î°úÎî© ÏÉÅÌÉú ÏãúÏûë
            btn.classList.add('loading');
            const originalIcon = icon.textContent;
            icon.textContent = '‚è≥';
            text.innerHTML = 'Í¥ëÍ≥†<br>Î°úÎî© Ï§ë...';
            
            // Ïã§Ï†úÎ°úÎäî Í¥ëÍ≥† SDKÎ•º Ïó∞ÎèôÌï¥Ïïº Ìï®
            // ÏòàÏãú: Google AdMob, Unity Ads Îì±
            // adSDK.showRewardedVideo({
            //     onComplete: () => { grantReward(slotNumber); },
            //     onError: () => { resetButton(slotNumber, originalIcon); }
            // });
            
            // ÏãúÎÆ¨Î†àÏù¥ÏÖò: 2Ï¥à ÌõÑ Í¥ëÍ≥† ÏôÑÎ£å
            console.log(`Í¥ëÍ≥† Ïä¨Î°Ø ${slotNumber} ÏãúÏ≤≠ ÏãúÏûë`);
            
            setTimeout(() => {
                // Í¥ëÍ≥† ÏãúÏ≤≠ ÏôÑÎ£å Ï≤òÎ¶¨
                grantReward(slotNumber);
                
                // Î°úÎî© ÏÉÅÌÉú Ï¢ÖÎ£å
                btn.classList.remove('loading');
                icon.textContent = originalIcon;
                text.innerHTML = 'Í¥ëÍ≥† Î≥¥Í≥†<br>üé´ Î∞õÍ∏∞';
            }, 2000);
        }

        function grantReward(slotNumber) {
            // Ìã∞Ïºì ÏßÄÍ∏â
            const currentTickets = parseInt(document.getElementById('ticketCount').textContent);
            updateUserStats({ tickets: currentTickets + 1 });
            
            // Ïø®ÌÉÄÏûÑ ÏãúÏûë
            startAdCooldown(slotNumber);
            
            // ÏÑ±Í≥µ ÏïåÎ¶º
            showToast('üé´ Ìã∞Ïºì 1Í∞úÎ•º Î∞õÏïòÏäµÎãàÎã§!');
            
            console.log(`Í¥ëÍ≥† Ïä¨Î°Ø ${slotNumber} Î≥¥ÏÉÅ ÏßÄÍ∏â ÏôÑÎ£å`);
        }

        function showToast(message) {
            // Í∞ÑÎã®Ìïú ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ (alert ÎåÄÏã†)
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                z-index: 10000;
                animation: fadeInOut 2s ease-in-out;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 2000);
        }

        function startAdCooldown(slotNumber) {
            const now = Date.now();
            const endTime = now + AD_COOLDOWN_DURATION;
            
            // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóê Ïø®ÌÉÄÏûÑ Ï¢ÖÎ£å ÏãúÍ∞Ñ Ï†ÄÏû•
            localStorage.setItem(`adCooldown${slotNumber}`, endTime);
            
            updateAdButton(slotNumber);
        }

        function updateAdButton(slotNumber) {
            const btn = document.getElementById(`adRewardBtn${slotNumber}`);
            const cooldownDiv = document.getElementById(`adCooldown${slotNumber}`);
            const endTime = localStorage.getItem(`adCooldown${slotNumber}`);
            
            if (!endTime) {
                btn.classList.remove('cooldown');
                cooldownDiv.textContent = '';
                return;
            }
            
            const now = Date.now();
            const remaining = endTime - now;
            
            if (remaining <= 0) {
                // Ïø®ÌÉÄÏûÑ Ï¢ÖÎ£å
                localStorage.removeItem(`adCooldown${slotNumber}`);
                btn.classList.remove('cooldown');
                cooldownDiv.textContent = '';
            } else {
                // Ïø®ÌÉÄÏûÑ ÏßÑÌñâ Ï§ë
                btn.classList.add('cooldown');
                
                const hours = Math.floor(remaining / (60 * 60 * 1000));
                const minutes = Math.floor((remaining % (60 * 60 * 1000)) / (60 * 1000));
                const seconds = Math.floor((remaining % (60 * 1000)) / 1000);
                
                cooldownDiv.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }

        function initAdButtons() {
            // Î™®Îì† Í¥ëÍ≥† Î≤ÑÌäº ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            for (let i = 1; i <= 3; i++) {
                updateAdButton(i);
            }
            
            // 1Ï¥àÎßàÎã§ Ïø®ÌÉÄÏûÑ ÏóÖÎç∞Ïù¥Ìä∏
            setInterval(() => {
                for (let i = 1; i <= 3; i++) {
                    updateAdButton(i);
                }
            }, 1000);
        }

        // Ï§ÄÎπÑÏ§ë ÏãúÎÇòÎ¶¨Ïò§ Ïπ¥Ïö¥Ìä∏Îã§Ïö¥
        function startUpcomingCountdowns() {
            const countdowns = {
                'upcomingCountdown1': 12 * 60 * 60 + 30 * 60, // 12ÏãúÍ∞Ñ 30Î∂Ñ
                'upcomingCountdown2': 18 * 60 * 60 + 45 * 60  // 18ÏãúÍ∞Ñ 45Î∂Ñ
            };
            
            Object.keys(countdowns).forEach(id => {
                let timeLeft = countdowns[id];
                
                const updateTimer = () => {
                    if (timeLeft <= 0) {
                        const element = document.getElementById(id);
                        element.textContent = 'üéâ Í≥ß ÏãúÏûë';
                        element.style.background = 'rgba(76, 175, 80, 0.9)';
                        element.style.color = '#fff';
                        element.style.fontWeight = '700';
                        element.style.animation = 'pulse 2s ease-in-out infinite';
                        return;
                    }
                    
                    const hours = Math.floor(timeLeft / 3600);
                    const minutes = Math.floor((timeLeft % 3600) / 60);
                    const seconds = timeLeft % 60;
                    
                    const timeString = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    document.getElementById(id).textContent = timeString;
                    
                    // 1ÏãúÍ∞Ñ ÎØ∏ÎßåÏùº Îïå Í∞ïÏ°∞
                    if (timeLeft < 3600) {
                        const element = document.getElementById(id);
                        element.style.background = 'rgba(255, 152, 0, 0.9)';
                        element.style.color = '#fff';
                    }
                    
                    timeLeft--;
                };
                
                updateTimer();
                setInterval(updateTimer, 1000);
            });
        }

        // Ìã∞Ïºì Íµ¨Îß§
        function buyTickets(amount) {
            const price = (amount * 0.1).toFixed(1);
            const confirmPurchase = confirm(`Ìã∞Ïºì ${amount}Í∞úÎ•º ${price} USDTÏóê Íµ¨Îß§ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`);
            
            if (confirmPurchase) {
                // TODO: Ïã§Ï†ú Í≤∞Ï†ú Î°úÏßÅ Íµ¨ÌòÑ
                alert('Í≤∞Ï†ú Í∏∞Îä•ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.');
                
                // Í≤∞Ï†ú ÏÑ±Í≥µ Ïãú:
                // const currentTickets = parseInt(document.getElementById('ticketCount').textContent);
                // updateUserStats({ tickets: currentTickets + amount });
            }
        }

        // ÎîîÎ≤ÑÍ∑∏ Ìï®Ïàò (ÏûÑÏãú ÌÖåÏä§Ìä∏Ïö©)
        async function testWinnerResult() {
            // ÏäπÏûê Îç∞Ïù¥ÌÑ∞Î°ú Í∞ïÏ†ú ÏÑ§Ï†ï
            const mockResult = await API.getEventResult(currentGameId);
            mockResult.isWinner = true;
            mockResult.correctCount = 10;
            mockResult.status = 'complete';
            
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            showFinalResult(mockResult);
        }

        async function testLoserResult() {
            // Ìå®Î∞∞ Îç∞Ïù¥ÌÑ∞Î°ú Í∞ïÏ†ú ÏÑ§Ï†ï
            const mockResult = await API.getEventResult(currentGameId);
            mockResult.isWinner = false;
            mockResult.correctCount = 7;
            mockResult.status = 'complete';
            
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            showFinalResult(mockResult);
        }

        function showExitGamePopup() {
            document.getElementById('exitGamePopup').classList.add('active');
        }

        function closeExitGamePopup() {
            document.getElementById('exitGamePopup').classList.remove('active');
        }

        function confirmExitGame() {
            closeExitGamePopup();
            backToHomeForce();
        }

        function backToHome() {
            // Í≤åÏûÑ ÌôîÎ©¥ÏóêÏÑú Îí§Î°úÍ∞ÄÍ∏∞Î•º ÎàÑÎ•∏ Í≤ΩÏö∞ ÌôïÏù∏ ÌåùÏóÖ ÌëúÏãú
            const gameScreen = document.getElementById('gameScreen');
            if (gameScreen.classList.contains('active')) {
                showExitGamePopup();
            } else {
                // Í≤∞Í≥º ÌôîÎ©¥ÏóêÏÑú Îí§Î°úÍ∞ÄÍ∏∞Îäî Í∑∏ÎÉ• Ïã§Ìñâ
                backToHomeForce();
            }
        }

        function backToHomeForce() {
            // Í≤åÏûÑ ÌÉÄÏù¥Î®∏ Ï†ïÏßÄ
            stopGameTimer();
            
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('homeScreen').classList.add('active');
            
            // ÌïòÎã® Î©îÎâ¥ Îã§Ïãú Î≥¥Ïù¥Í∏∞ Î∞è Î©îÏù∏ ÏΩòÌÖêÏ∏† Ìå®Îî© Î≥µÏõê
            document.querySelector('.bottom-nav').classList.remove('hidden');
            document.querySelector('.main-content').classList.remove('no-padding');
        }

        // ========================================
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïï± Ï¥àÍ∏∞Ìôî Ïã§Ìñâ
        // ========================================
        
        // DOMContentLoaded Ïù¥Î≤§Ìä∏Î°ú Ï¥àÍ∏∞Ìôî
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            // Ïù¥ÎØ∏ Î°úÎìúÎêú Í≤ΩÏö∞ Î∞îÎ°ú Ïã§Ìñâ
            initApp();
        }
    </script>
</body>
</html>
